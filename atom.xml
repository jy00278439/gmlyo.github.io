<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>G加菲</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.gmlyo.com/"/>
  <updated>2018-06-10T07:03:34.569Z</updated>
  <id>http://www.gmlyo.com/</id>
  
  <author>
    <name>G加菲</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Chevereto图床</title>
    <link href="http://www.gmlyo.com//blog/2018/06/10/Chevereto%E5%9B%BE%E5%BA%8A/"/>
    <id>http://www.gmlyo.com//blog/2018/06/10/Chevereto图床/</id>
    <published>2018-06-10T06:02:40.000Z</published>
    <updated>2018-06-10T07:03:34.569Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Chevereto图床"><a href="#Chevereto图床" class="headerlink" title="Chevereto图床"></a>Chevereto图床</h2><blockquote><p><code>Chevereto</code> 是一款采用 <code>PHP</code> 语言开发的网络相册脚本程序，支持多语言，提供中文语言包的下载的开源在线图片存储分享服务系统，支持本地上传和在线获取两种图像上传方式，并集成了 <code>TinyURL</code> 网址缩短服务。<br><code>Chevereto</code> 这套程序可以像 <code>Discuz</code> 或 <code>WordPress</code> 一样随意架设在任何空间上。<br>而它的功能除了一般图片空间单纯的从电脑上传图片外，也支援利用网址也可以上传，最屌的是还有 <code>TinyURL</code> 的缩短网址的功能可以使用，因此这套 <code>Chevereto</code> 可以说是比市面上的图片空间好太多了。<br>他是把图片上传到空间的，相信一般大家都一定会使用免费空间，在此建议大家在挑主机时尽可能使用 <code>cPanel</code> 的空间，因为可以使用 <code>cPanel</code> 特有的 <code>「Cron Jobs」</code> 来备份你上传的图片。</p></blockquote><a id="more"></a><blockquote><p><code>Chevereto</code> 是一款分享照片的程序，可以非常轻松得在自己的服务器上搭建照片分享程序，功能强大，外观精美。<br><code>Chevereto</code> 本身是收费使用的，一次性付费，终身使用，但是其开源版本可以免费使用。<br><a href="https://chevereto.com/" target="_blank" rel="noopener">https://chevereto.com/</a><br><a href="https://github.com/Chevereto/Chevereto-Free" target="_blank" rel="noopener">https://github.com/Chevereto/Chevereto-Free</a><br><a href="https://chevereto.com/docs/requirements" target="_blank" rel="noopener">https://chevereto.com/docs/requirements</a></p></blockquote><h3 id="Clevereto-错误-404-解决方法"><a href="#Clevereto-错误-404-解决方法" class="headerlink" title="Clevereto 错误 404 解决方法"></a>Clevereto 错误 <code>404</code> 解决方法</h3><blockquote><p>如果 <code>Web服务</code> 是 <code>Nginx</code>，基本第一步安装好后再次打开网站会出现 <code>404</code> 错误。<br>因为 <code>Chevereto</code> 默认提供基于 <code>Apache</code> 环境的伪静态规则</p></blockquote><blockquote><p>需要设置以下 <code>Rewrite</code> 伪静态规则<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">if</span> (-f <span class="variable">$request_filename</span>/index.html)&#123;</span><br><span class="line">        <span class="attribute">rewrite</span> (.*) <span class="variable">$1</span>/index.html <span class="literal">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">if</span> (-f <span class="variable">$request_filename</span>/index.php)&#123;</span><br><span class="line">        <span class="attribute">rewrite</span> (.*) <span class="variable">$1</span>/index.php;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">if</span> (!-f <span class="variable">$request_filename</span>)&#123;</span><br><span class="line">        <span class="attribute">rewrite</span> (.*) /index.php;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /api.php;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> /admin &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> /admin/index.php?<span class="variable">$args</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p></blockquote><h3 id="官方推荐配置"><a href="#官方推荐配置" class="headerlink" title="官方推荐配置"></a>官方推荐配置</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Disable access to .ht* files</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ /\.ht</span> &#123;</span><br><span class="line">    <span class="attribute">deny</span> all;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable access to sensitive files in app path</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ /(app|content|lib)/.*\.(po|php|lock|sql)$</span> &#123;</span><br><span class="line">  <span class="attribute">deny</span> all;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable log on not found images + image replacement</span></span><br><span class="line"><span class="comment"># Image not found replacement</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~* (jpe?g|png|gif)</span> &#123;</span><br><span class="line">    <span class="attribute">log_not_found</span> <span class="literal">off</span>;</span><br><span class="line">    <span class="attribute">error_page</span> <span class="number">404</span> /content/images/system/default/<span class="number">404</span>.gif;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Enable CORS header (avoids font rendering issues)</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ \.(ttf|ttc|otf|eot|woff|woff2|font.css|css|js)$</span> &#123;</span><br><span class="line">    <span class="attribute">add_header</span> Access-Control-Allow-Origin <span class="string">"*"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Force serve upload path as static content</span></span><br><span class="line"><span class="attribute">location</span> <span class="regexp">~ /images</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Pretty URLs</span></span><br><span class="line"><span class="comment"># Route dynamic request to index.php</span></span><br><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$query_string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>参考文档</p><blockquote><p><a href="https://www.zhujibiji.com/2017/11/install-chevere-to-build-your-image-sharing-website/" target="_blank" rel="noopener">https://www.zhujibiji.com/2017/11/install-chevere-to-build-your-image-sharing-website/</a><br><a href="https://lala.im/2478.html" target="_blank" rel="noopener">https://lala.im/2478.html</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Chevereto图床&quot;&gt;&lt;a href=&quot;#Chevereto图床&quot; class=&quot;headerlink&quot; title=&quot;Chevereto图床&quot;&gt;&lt;/a&gt;Chevereto图床&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Chevereto&lt;/code&gt; 是一款采用 &lt;code&gt;PHP&lt;/code&gt; 语言开发的网络相册脚本程序，支持多语言，提供中文语言包的下载的开源在线图片存储分享服务系统，支持本地上传和在线获取两种图像上传方式，并集成了 &lt;code&gt;TinyURL&lt;/code&gt; 网址缩短服务。&lt;br&gt;&lt;code&gt;Chevereto&lt;/code&gt; 这套程序可以像 &lt;code&gt;Discuz&lt;/code&gt; 或 &lt;code&gt;WordPress&lt;/code&gt; 一样随意架设在任何空间上。&lt;br&gt;而它的功能除了一般图片空间单纯的从电脑上传图片外，也支援利用网址也可以上传，最屌的是还有 &lt;code&gt;TinyURL&lt;/code&gt; 的缩短网址的功能可以使用，因此这套 &lt;code&gt;Chevereto&lt;/code&gt; 可以说是比市面上的图片空间好太多了。&lt;br&gt;他是把图片上传到空间的，相信一般大家都一定会使用免费空间，在此建议大家在挑主机时尽可能使用 &lt;code&gt;cPanel&lt;/code&gt; 的空间，因为可以使用 &lt;code&gt;cPanel&lt;/code&gt; 特有的 &lt;code&gt;「Cron Jobs」&lt;/code&gt; 来备份你上传的图片。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="图床笔记" scheme="http://www.gmlyo.com/categories/%E5%9B%BE%E5%BA%8A%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Chevereto图床" scheme="http://www.gmlyo.com/tags/Chevereto%E5%9B%BE%E5%BA%8A/"/>
    
  </entry>
  
  <entry>
    <title>关于图床的选择</title>
    <link href="http://www.gmlyo.com//blog/2018/06/10/%E5%85%B3%E4%BA%8E%E5%9B%BE%E5%BA%8A%E7%9A%84%E9%80%89%E6%8B%A9/"/>
    <id>http://www.gmlyo.com//blog/2018/06/10/关于图床的选择/</id>
    <published>2018-06-10T04:51:44.000Z</published>
    <updated>2018-06-10T06:35:39.450Z</updated>
    
    <content type="html"><![CDATA[<h2 id="关于图床的选择"><a href="#关于图床的选择" class="headerlink" title="关于图床的选择"></a>关于图床的选择</h2><h3 id="为什么要使用图床？"><a href="#为什么要使用图床？" class="headerlink" title="为什么要使用图床？"></a>为什么要使用图床？</h3><blockquote><p>Hexo 文章中的图片，我们可以放到本地，然后一起部署到 <code>Github</code> 中，这样完全没有问题。<br>然而 github pages 空间毕竟有限（貌似只有 <code>300M</code>）,另外图片的管理太混乱了，一些原创的图片可能被盗链。</p></blockquote><a id="more"></a><blockquote><p>很多技术人写作都用的是 <code>MarkDown</code> 轻量级标记语言进行博客写作，这种写作让我们不用像使用 Word 那样那么麻烦地调整排版和格式，只需专心写作并且照样完成排版的一种方式。<br>但是，基本所有支持 <code>MarkDown</code> 本地写作工具都只能采用导入本地图片引用的方式，对于一篇需要大量图片阐述的文章以及该文章上传至网络图片丢失，这不得不是个很糟糕的问题。<br>那么有什么比较好的解决方式吗？<br>很多人采用的图片寄存于网络，用服务厂商作为图片存储的地方，大家都叫为 <code>「图床」</code> 。</p></blockquote><blockquote><p>那么像 CSDN 博客、简书平台不是都可以吗？<br>是的，它们平台写文章的时候都可以导入图片然后得到一个图片网络地址。<br>但是，图片数量多，一张一张上传，这不是贼烦嘛！<br>那么有专门可以作 <code>「图床」</code> 功能的服务商吗？<br>有的，比如七牛云。</p></blockquote><p><strong>网上谷歌搜下还是能搜到很多图床网站的，先随便列举一些</strong></p><h3 id="公共图床"><a href="#公共图床" class="headerlink" title="公共图床"></a>公共图床</h3><h4 id="SM-MS"><a href="#SM-MS" class="headerlink" title="SM.MS"></a>SM.MS</h4><blockquote><p><a href="https://sm.ms/" target="_blank" rel="noopener">https://sm.ms/</a><br>SM.MS 是由 V2EX @Showfom 自建的，无外链限制，无流量限制的图床，支持 HTTPS，速度不错，已经运行两年多了。</p></blockquote><h4 id="极简图床"><a href="#极简图床" class="headerlink" title="极简图床"></a>极简图床</h4><blockquote><p><a href="https://jiantuku.com/#/" target="_blank" rel="noopener">https://jiantuku.com/#/</a></p></blockquote><h4 id="路过图床"><a href="#路过图床" class="headerlink" title="路过图床"></a>路过图床</h4><blockquote><p><a href="https://imgchr.com/" target="_blank" rel="noopener">https://imgchr.com/</a></p></blockquote><h4 id="Imgur"><a href="#Imgur" class="headerlink" title="Imgur"></a>Imgur</h4><blockquote><p><a href="https://imgur.com/" target="_blank" rel="noopener">https://imgur.com/</a><br>Imgur 是一家国外老牌的图片存储服务商，国外速度很快，口碑不错，支持 HTTPS。<br>但是国内速度很不稳定，所以追求国内速度的同学慎用。</p></blockquote><h4 id="Qchan图床"><a href="#Qchan图床" class="headerlink" title="Qchan图床"></a>Qchan图床</h4><p><a href="http://tuchuang.org/" target="_blank" rel="noopener">http://tuchuang.org/</a></p><h4 id="微博图床"><a href="#微博图床" class="headerlink" title="微博图床"></a>微博图床</h4><blockquote><p>微博图床，可以自定义支持七牛，界面简洁美观，支持 Chrome 插件，注册后还可以同步上传历史。</p></blockquote><h3 id="自建图床"><a href="#自建图床" class="headerlink" title="自建图床"></a>自建图床</h3><blockquote><p>目前自建图床方案有两种</p><ol><li>是利用云服务商提供的存储服务来作为图床，通过 API 来管理图片</li><li>是在 VPS 上安装开源的图片或文件管理程序，只要能提供外链，基本都可以作为图床来用。</li></ol></blockquote><h4 id="建图床（云服务）"><a href="#建图床（云服务）" class="headerlink" title="建图床（云服务）"></a>建图床（云服务）</h4><blockquote><p>七牛云，又拍云，阿里云OSS</p></blockquote><h4 id="自建图床（开源方案）"><a href="#自建图床（开源方案）" class="headerlink" title="自建图床（开源方案）"></a>自建图床（开源方案）</h4><blockquote><p>如果你有 VPS，并且网络速度 OK 的话，自建图床也是一个不错的选择。</p></blockquote><h5 id="Lychee"><a href="#Lychee" class="headerlink" title="Lychee"></a>Lychee</h5><blockquote><p><a href="https://github.com/electerious/Lychee" target="_blank" rel="noopener">https://github.com/electerious/Lychee</a><br>Lychee 是一个开源免费的基于 PHP 的图片管理系统，支持 Docker 部署，<br>可以直接当做图床来用，Lychee 还支持很多扩展。</p></blockquote><h5 id="树洞外链"><a href="#树洞外链" class="headerlink" title="树洞外链"></a>树洞外链</h5><blockquote><p><a href="https://yun.aoaoao.me/" target="_blank" rel="noopener">https://yun.aoaoao.me/</a><br><a href="https://github.com/HFO4/shudong-share" target="_blank" rel="noopener">https://github.com/HFO4/shudong-share</a><br>树洞外链 是一款免费开源的 PHP 外链网盘系统，界面简洁友好，<br>支持七牛、本地、远程、阿里云OSS、又拍云五种储存方式，<br>支持多用户系统，多上传方案策略。</p></blockquote><h5 id="Chevereto"><a href="#Chevereto" class="headerlink" title="Chevereto"></a>Chevereto</h5><blockquote><p><a href="https://chevereto.com/" target="_blank" rel="noopener">https://chevereto.com/</a><br><a href="https://github.com/Chevereto/Chevereto-Free" target="_blank" rel="noopener">https://github.com/Chevereto/Chevereto-Free</a><br><a href="https://chevereto.com/docs/requirements" target="_blank" rel="noopener">https://chevereto.com/docs/requirements</a><br>Chevereto 是一款分享照片的程序，可以非常轻松得在自己的服务器上搭建照片分享程序，功能强大，外观精美。<br>Chevereto 本身是收费使用的，一次性付费，终身使用，但是其开源版本可以免费使用。</p></blockquote><p><strong>使用图床的目的是希望文章的图片资源能有更好的加载速度和稳定的显示效果</strong>。</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;关于图床的选择&quot;&gt;&lt;a href=&quot;#关于图床的选择&quot; class=&quot;headerlink&quot; title=&quot;关于图床的选择&quot;&gt;&lt;/a&gt;关于图床的选择&lt;/h2&gt;&lt;h3 id=&quot;为什么要使用图床？&quot;&gt;&lt;a href=&quot;#为什么要使用图床？&quot; class=&quot;headerlink&quot; title=&quot;为什么要使用图床？&quot;&gt;&lt;/a&gt;为什么要使用图床？&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Hexo 文章中的图片，我们可以放到本地，然后一起部署到 &lt;code&gt;Github&lt;/code&gt; 中，这样完全没有问题。&lt;br&gt;然而 github pages 空间毕竟有限（貌似只有 &lt;code&gt;300M&lt;/code&gt;）,另外图片的管理太混乱了，一些原创的图片可能被盗链。&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="图床笔记" scheme="http://www.gmlyo.com/categories/%E5%9B%BE%E5%BA%8A%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="关于图床的选择" scheme="http://www.gmlyo.com/tags/%E5%85%B3%E4%BA%8E%E5%9B%BE%E5%BA%8A%E7%9A%84%E9%80%89%E6%8B%A9/"/>
    
  </entry>
  
  <entry>
    <title>Java虚拟机之堆溢出处理</title>
    <link href="http://www.gmlyo.com//blog/2018/06/10/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B9%8B%E5%A0%86%E6%BA%A2%E5%87%BA%E5%A4%84%E7%90%86/"/>
    <id>http://www.gmlyo.com//blog/2018/06/10/Java虚拟机之堆溢出处理/</id>
    <published>2018-06-09T16:13:38.000Z</published>
    <updated>2018-06-09T16:24:52.630Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Java-虚拟机之堆溢出处理"><a href="#Java-虚拟机之堆溢出处理" class="headerlink" title="Java 虚拟机之堆溢出处理"></a>Java 虚拟机之堆溢出处理</h2><p>在 Java 程序的运行过程中，如果堆空间不足，则有可能抛出内存溢出错误 <code>(Out Of Memory)</code>，简称为 <code>OOM</code>。</p><a id="more"></a><blockquote><p>如下文字显示了典型的堆内存溢出</p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Exception <span class="keyword">in</span> thread <span class="string">"main"</span> java<span class="selector-class">.lang</span><span class="selector-class">.OutOfMemoryError</span>: Java heap space at geym<span class="selector-class">.zbase</span><span class="selector-class">.ch3</span><span class="selector-class">.heap</span><span class="selector-class">.DumpOOM</span><span class="selector-class">.main</span>(DumpOOM<span class="selector-class">.java</span>:<span class="number">20</span>)</span><br></pre></td></tr></table></figure><blockquote><p>一旦发生这类问题，系统就会被迫退出。如果发生在生产环境，可能会引起严重的业务中断。<br>为了能够不断改善系统，避免或减少这类错误的发生，需要在发生错误时，获得尽可能多的现场信息，以帮助研发人员排查现场问题。</p></blockquote><blockquote><p>Java 虚拟机提供了参数 <code>-XX:+HeapDumpOnOutOfMemoryError</code>，使用该参数，可以在内存溢出时导出整个堆信息。<br>和它配合使用的还有 <code>-XX:HeapDumpPath</code>，可以指定导出堆的存放路径。</p></blockquote><blockquote><p>使用如下参数执行上述代码</p></blockquote><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Xms5m -Xmx20m -<span class="string">XX:</span>+HeapDumpOnOutOfMemoryError -<span class="string">XX:</span>HeapDumpPath=<span class="regexp">/data/</span>app<span class="regexp">/tomcat/</span>logs/P02.dump</span><br></pre></td></tr></table></figure><blockquote><p>显然 <code>20M</code> 堆空间不足以容纳 <code>25M</code> 内存，系统比如发生内存溢出，在发生错误后，控制台输出如下 </p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java<span class="selector-class">.lang</span><span class="selector-class">.OutOfMemoryError</span>: Java heap space Dumping heap to /data/app/tomcat/logs/P02<span class="selector-class">.dump</span>... Heap dump file created [<span class="number">23067302</span> bytes <span class="keyword">in</span> <span class="number">0.160</span> secs] Exception <span class="keyword">in</span> thread “main” java<span class="selector-class">.lang</span><span class="selector-class">.OutOfMemoryError</span>: Java heap space at geym<span class="selector-class">.zbase</span><span class="selector-class">.ch3</span><span class="selector-class">.heap</span><span class="selector-class">.DumpOOM</span><span class="selector-class">.main</span>(DumpOOM<span class="selector-class">.java</span>:<span class="number">19</span>)</span><br></pre></td></tr></table></figure><blockquote><p>可以看到，虚拟机将当前的堆导出，并保存到 <code>/data/app/tomcat/logs/P02.dump</code> 文件下<br>启动最小空间 <code>5M</code>，配了 <code>20M</code> 最大空间 ，发生了 <code>内存溢出错误</code>，dump 路径为 <code>/data/app/tomcat/logs/P02.dump</code>  使用 MAT 等工具打开该文件进行分析，可以很容易地找到这些 <code>byte</code> 数组和保存它们的 <code>Vector</code> 对象实例</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Java-虚拟机之堆溢出处理&quot;&gt;&lt;a href=&quot;#Java-虚拟机之堆溢出处理&quot; class=&quot;headerlink&quot; title=&quot;Java 虚拟机之堆溢出处理&quot;&gt;&lt;/a&gt;Java 虚拟机之堆溢出处理&lt;/h2&gt;&lt;p&gt;在 Java 程序的运行过程中，如果堆空间不足，则有可能抛出内存溢出错误 &lt;code&gt;(Out Of Memory)&lt;/code&gt;，简称为 &lt;code&gt;OOM&lt;/code&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="Java笔记" scheme="http://www.gmlyo.com/categories/Java%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Java虚拟机之堆溢出处理" scheme="http://www.gmlyo.com/tags/Java%E8%99%9A%E6%8B%9F%E6%9C%BA%E4%B9%8B%E5%A0%86%E6%BA%A2%E5%87%BA%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>Python编译安装</title>
    <link href="http://www.gmlyo.com//blog/2018/06/08/Python%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    <id>http://www.gmlyo.com//blog/2018/06/08/Python编译安装/</id>
    <published>2018-06-08T15:39:07.000Z</published>
    <updated>2018-06-08T16:30:08.201Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>一般情况下，Linux 都会预装 Python，但是这个预装的 Python 版本一般都比较低，很多 Python 的新特性都没有，必须重新安装新一点的版本<br>Python下载地址<br><a href="https://www.python.org/" target="_blank" rel="noopener">https://www.python.org/</a><br><a href="https://www.python.org/ftp/python/" target="_blank" rel="noopener">https://www.python.org/ftp/python/</a><br><a href="https://www.python.org/ftp/python/2.7.15/" target="_blank" rel="noopener">https://www.python.org/ftp/python/2.7.15/</a><br><a href="https://www.python.org/ftp/python/3.6.5/" target="_blank" rel="noopener">https://www.python.org/ftp/python/3.6.5/</a></p></blockquote><a id="more"></a><h3 id="查看-Python-版本"><a href="#查看-Python-版本" class="headerlink" title="查看 Python 版本"></a>查看 Python 版本</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">python</span> <span class="selector-tag">-V</span></span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">CentOS</span> 6<span class="selector-class">.x</span></span><br><span class="line"><span class="selector-tag">Python</span> 2<span class="selector-class">.6</span><span class="selector-class">.6</span></span><br><span class="line"></span><br><span class="line"># <span class="selector-tag">CentOS</span> 7<span class="selector-class">.x</span></span><br><span class="line"><span class="selector-tag">python</span> 2<span class="selector-class">.7</span><span class="selector-class">.5</span></span><br></pre></td></tr></table></figure><p><del>做好链接，保留旧版本 python</del><br><del>cd /usr/bin/</del><br><del>cp /usr/bin/python /usr/bin/python_bak</del></p><p><del>如果发现 yum 不能用了，解决 yum 无法使用的问题</del><br><del>因为 yum 依赖系统默认安装的 python 版本, 处理如下：</del><br><del>vim /usr/bin/yum</del><br><del>#!/usr/bin/python</del><br><del>修改为-&gt; #!/usr/bin/python2.6 或 #!/usr/bin/env python2.6</del><br><del>import sys</del><br><del>try:</del><br>    <del>import yum</del><br><del>except ImportError:</del><br><del>……省略……</del></p><p><strong>这里不更改 <code>原 Python 版本</code></strong></p><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install readline readline-devel sqlite sqlite-devel <span class="literal">zlib</span> <span class="literal">zlib</span>-devel openssl openssl-devel <span class="literal">bzip2</span> <span class="literal">bzip2</span>-devel <span class="literal">bzip2</span>-libs</span><br></pre></td></tr></table></figure><blockquote><p>缺少 <code>readline</code> 支持的 <code>IPython</code><br>WARNING: IPython History requires SQLite, your history will not be saved<br>WARNING: Readline services not available or not loaded.<br>WARNING: The auto-indent feature requires the readline library</p></blockquote><h3 id="下载-Python"><a href="#下载-Python" class="headerlink" title="下载  Python"></a>下载  <code>Python</code></h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -c https:<span class="regexp">//</span>www.python.org<span class="regexp">/ftp/</span>python<span class="regexp">/3.6.5/</span>Python-<span class="number">3.6</span>.<span class="number">5</span>.tar.xz</span><br><span class="line">wget -c https:<span class="regexp">//</span>www.python.org<span class="regexp">/ftp/</span>python<span class="regexp">/2.7.15/</span>Python-<span class="number">2.7</span>.<span class="number">15</span>.tar.xz</span><br></pre></td></tr></table></figure><h3 id="安装-Python"><a href="#安装-Python" class="headerlink" title="安装 Python"></a>安装 Python</h3><h4 id="安装-Python-2-7-15"><a href="#安装-Python-2-7-15" class="headerlink" title="安装 Python 2.7.15"></a>安装 Python 2.7.15</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf Python<span class="number">-2.7</span><span class="number">.15</span>.tgz</span><br><span class="line">cd Python<span class="number">-2.7</span><span class="number">.15</span>/</span><br><span class="line">./configure \</span><br><span class="line">--prefix=/data/python2<span class="number">.7</span><span class="number">.15</span> --enable-optimizations</span><br><span class="line">make -j <span class="number">4</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h4 id="安装-Python-3-6-5"><a href="#安装-Python-3-6-5" class="headerlink" title="安装 Python 3.6.5"></a>安装 Python 3.6.5</h4><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf Python<span class="number">-3.6</span><span class="number">.5</span>.tgz</span><br><span class="line">cd Python<span class="number">-3.6</span><span class="number">.5</span>/</span><br><span class="line">./configure \</span><br><span class="line">--prefix=/data/python3<span class="number">.6</span><span class="number">.5</span> --enable-optimizations</span><br><span class="line">make -j <span class="number">4</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h4 id="添加-Python-环境变量"><a href="#添加-Python-环境变量" class="headerlink" title="添加 Python 环境变量"></a>添加 Python 环境变量</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/python2.7.15/bin</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/python3.6.5/bin</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><blockquote><p>或</p></blockquote><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e '\nexport <span class="built_in">PATH</span>=$<span class="built_in">PATH</span>:/data/python2.<span class="number">7</span>.<span class="number">15</span>/bin' &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">echo</span> -e 'export <span class="built_in">PATH</span>=$<span class="built_in">PATH</span>:/data/python3.<span class="number">6</span>.<span class="number">5</span>/bin' &gt;&gt; /etc/profile</span><br></pre></td></tr></table></figure><p><del>PS：如果安装 easy_intall 时报 zlib 没有安装，Linux下直接 yum -y install zlib zlib-devel，然后重新编译 Python2.7.15 继续就可以了</del><br><del>cp /usr/bin/python /usr/bin/python_bak</del><br><del>ln -svnf /data/python2.7.15/bin/python2.7 /usr/bin/python</del></p><h3 id="setuptools-安装"><a href="#setuptools-安装" class="headerlink" title="setuptools 安装"></a>setuptools 安装</h3><blockquote><p>下载地址<br><a href="https://pypi.python.org/pypi/setuptools" target="_blank" rel="noopener">https://pypi.python.org/pypi/setuptools</a><br><a href="https://pypi.python.org/simple/setuptools/" target="_blank" rel="noopener">https://pypi.python.org/simple/setuptools/</a></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">setuptools-39</span><span class="selector-class">.2</span><span class="selector-class">.0</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">setuptools-39</span><span class="selector-class">.2</span><span class="selector-class">.0</span></span><br><span class="line"><span class="selector-tag">python3</span> <span class="selector-tag">setup</span><span class="selector-class">.py</span> <span class="selector-tag">build</span></span><br><span class="line"><span class="selector-tag">python3</span> <span class="selector-tag">setup</span><span class="selector-class">.py</span> <span class="selector-tag">install</span></span><br></pre></td></tr></table></figure><blockquote><p>IPython 是一个 python 的交互式 Shell，比默认的 Python Shell 好用一点，支持变量自动补全，自动缩进，支持 Bash Shell 命令，内置了许多很有用的功能和函数<br>安装 IPython<br>IPython 下载地址<br><a href="https://pypi.org/project/ipython/" target="_blank" rel="noopener">https://pypi.org/project/ipython/</a></p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf ipython-<span class="number">6.4</span>.<span class="number">0</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">cd ipython-<span class="number">6.4</span>.<span class="number">0</span>/</span><br><span class="line">python3 setup<span class="selector-class">.py</span> build</span><br><span class="line">python3 setup<span class="selector-class">.py</span> install</span><br></pre></td></tr></table></figure><h3 id="安装-pip"><a href="#安装-pip" class="headerlink" title="安装 pip"></a>安装 pip</h3><blockquote><p>pip 下载地址<br><a href="https://pypi.org/project/pip/" target="_blank" rel="noopener">https://pypi.org/project/pip/</a></p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf pip-<span class="number">10.0</span>.<span class="number">1</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line">cd pip-<span class="number">10.0</span>.<span class="number">1</span>/</span><br><span class="line">python3 setup<span class="selector-class">.py</span> build</span><br><span class="line">python3 setup<span class="selector-class">.py</span> install</span><br></pre></td></tr></table></figure><h3 id="pip-安装-python-第三方库"><a href="#pip-安装-python-第三方库" class="headerlink" title="pip 安装 python 第三方库"></a>pip 安装 python 第三方库</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip3 <span class="keyword">install</span> requests</span><br><span class="line">pip3 <span class="keyword">install</span> pyapi-gitlab</span><br><span class="line">pip3 <span class="keyword">install</span> readline</span><br><span class="line">pip3 <span class="keyword">install</span> rlcompleter2</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;一般情况下，Linux 都会预装 Python，但是这个预装的 Python 版本一般都比较低，很多 Python 的新特性都没有，必须重新安装新一点的版本&lt;br&gt;Python下载地址&lt;br&gt;&lt;a href=&quot;https://www.python.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.python.org/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.python.org/ftp/python/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.python.org/ftp/python/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.python.org/ftp/python/2.7.15/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.python.org/ftp/python/2.7.15/&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.python.org/ftp/python/3.6.5/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.python.org/ftp/python/3.6.5/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Python笔记" scheme="http://www.gmlyo.com/categories/Python%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Python编译安装" scheme="http://www.gmlyo.com/tags/Python%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>Shell脚本日志切割</title>
    <link href="http://www.gmlyo.com//blog/2018/06/08/Shell%E8%84%9A%E6%9C%AC%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"/>
    <id>http://www.gmlyo.com//blog/2018/06/08/Shell脚本日志切割/</id>
    <published>2018-06-07T18:42:03.000Z</published>
    <updated>2018-06-07T18:51:43.803Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Shell-脚本日志切割"><a href="#Shell-脚本日志切割" class="headerlink" title="Shell 脚本日志切割"></a>Shell 脚本日志切割</h3><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">vim logcut.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">day=$(date +<span class="string">"%Y-%m-%d"</span>)</span><br><span class="line">yesterday=$(date -d <span class="string">"yesterday"</span> +%Y-%m-%d)</span><br><span class="line">logsdir=(/data/app/*/logs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> logdir <span class="keyword">in</span> <span class="variable">$&#123;logsdir[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="keyword">for</span> logfile <span class="keyword">in</span> $(ls <span class="variable">$&#123;logdir[@]&#125;</span> | egrep <span class="string">"stdout.log|catalina.out"</span>)</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">        cp <span class="variable">$logdir</span>/<span class="variable">$logfile</span> <span class="variable">$logdir</span>/<span class="variable">$&#123;logfile%.log&#125;</span>.<span class="variable">$&#123;day&#125;</span>.<span class="built_in">log</span></span><br><span class="line">        cp <span class="variable">$logs</span>/<span class="variable">$file</span> <span class="variable">$logs</span>/<span class="variable">$&#123;file%.out&#125;</span>.<span class="variable">$&#123;day&#125;</span>.out</span><br><span class="line">        cat /dev/null &gt; <span class="variable">$logdir</span>/<span class="variable">$logfile</span></span><br><span class="line">    <span class="keyword">done</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Shell-脚本日志切割&quot;&gt;&lt;a href=&quot;#Shell-脚本日志切割&quot; class=&quot;headerlink&quot; title=&quot;Shell 脚本日志切割&quot;&gt;&lt;/a&gt;Shell 脚本日志切割&lt;/h3&gt;
    
    </summary>
    
      <category term="Shell笔记" scheme="http://www.gmlyo.com/categories/Shell%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Shell脚本日志切割" scheme="http://www.gmlyo.com/tags/Shell%E8%84%9A%E6%9C%AC%E6%97%A5%E5%BF%97%E5%88%87%E5%89%B2/"/>
    
  </entry>
  
  <entry>
    <title>Shell脚本日志压缩</title>
    <link href="http://www.gmlyo.com//blog/2018/06/08/Shell%E8%84%9A%E6%9C%AC%E6%97%A5%E5%BF%97%E5%8E%8B%E7%BC%A9/"/>
    <id>http://www.gmlyo.com//blog/2018/06/08/Shell脚本日志压缩/</id>
    <published>2018-06-07T16:51:39.000Z</published>
    <updated>2018-06-07T18:52:01.150Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Shell-脚本日志压缩打包"><a href="#Shell-脚本日志压缩打包" class="headerlink" title="Shell 脚本日志压缩打包"></a>Shell 脚本日志压缩打包</h3><blockquote><p>压缩 <code>7</code> 天前日志<br>每个月 <code>1</code> 号，创建上个月的目录，<code>年-月</code> <code>2018-04</code><br>将 <code>gz</code> 压缩文件拷贝到 <code>年-月</code> <code>2018-04</code> 目录中</p></blockquote><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vim compresslog.sh</span><br><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">day=$(date +<span class="string">"%d"</span>)</span><br><span class="line">month=$(date +<span class="string">"%Y-%d"</span>)</span><br><span class="line">lastmonth=$(date +<span class="string">"%Y-%m"</span> -d <span class="string">"last month"</span>)</span><br><span class="line">lastweek=$(date +<span class="string">"%Y-%m-%d"</span> -d <span class="string">"last week"</span>)</span><br><span class="line">logsdir=(/data/app/*/logs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> logs <span class="keyword">in</span> <span class="variable">$&#123;logsdir[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    find <span class="variable">$logs</span>/ -mtime +7 -regextype posix-extended -regex <span class="string">".*\.(log|out|txt)"</span> -<span class="built_in">exec</span> gzip &#123;&#125; \;</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">[ <span class="variable">$day</span> == 01 ] &amp;&amp; <span class="built_in">cd</span> <span class="variable">$&#123;logsdir[@]&#125;</span> &amp;&amp; mkdir -pv <span class="variable">$lastmonth</span></span><br><span class="line"><span class="keyword">for</span> logdir <span class="keyword">in</span> <span class="variable">$&#123;logsdir[@]&#125;</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    [ -d <span class="variable">$logdir</span>/<span class="variable">$lastmonth</span> ] || mkdir -pv <span class="variable">$logdir</span>/<span class="variable">$lastmonth</span></span><br><span class="line">    mv <span class="variable">$logdir</span>/*gz <span class="variable">$logdir</span>/<span class="variable">$lastmonth</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Shell-脚本日志压缩打包&quot;&gt;&lt;a href=&quot;#Shell-脚本日志压缩打包&quot; class=&quot;headerlink&quot; title=&quot;Shell 脚本日志压缩打包&quot;&gt;&lt;/a&gt;Shell 脚本日志压缩打包&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;压缩 &lt;code&gt;7&lt;/code&gt; 天前日志&lt;br&gt;每个月 &lt;code&gt;1&lt;/code&gt; 号，创建上个月的目录，&lt;code&gt;年-月&lt;/code&gt; &lt;code&gt;2018-04&lt;/code&gt;&lt;br&gt;将 &lt;code&gt;gz&lt;/code&gt; 压缩文件拷贝到 &lt;code&gt;年-月&lt;/code&gt; &lt;code&gt;2018-04&lt;/code&gt; 目录中&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Shell笔记" scheme="http://www.gmlyo.com/categories/Shell%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Shell脚本日志压缩" scheme="http://www.gmlyo.com/tags/Shell%E8%84%9A%E6%9C%AC%E6%97%A5%E5%BF%97%E5%8E%8B%E7%BC%A9/"/>
    
  </entry>
  
  <entry>
    <title>LVM 磁盘扩展</title>
    <link href="http://www.gmlyo.com//blog/2018/06/07/LVM%E7%A3%81%E7%9B%98%E6%89%A9%E5%B1%95/"/>
    <id>http://www.gmlyo.com//blog/2018/06/07/LVM磁盘扩展/</id>
    <published>2018-06-06T17:11:42.000Z</published>
    <updated>2018-06-07T18:57:45.323Z</updated>
    
    <content type="html"><![CDATA[<h2 id="LVM-磁盘扩展"><a href="#LVM-磁盘扩展" class="headerlink" title="LVM 磁盘扩展"></a>LVM 磁盘扩展</h2><a id="more"></a><h3 id="查看磁盘空间"><a href="#查看磁盘空间" class="headerlink" title="查看磁盘空间"></a>查看磁盘空间</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">df -h</span></span><br></pre></td></tr></table></figure><h3 id="查看-LV-信息"><a href="#查看-LV-信息" class="headerlink" title="查看 LV 信息"></a>查看 LV 信息</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">lvs</span></span><br></pre></td></tr></table></figure><h3 id="查看-VG-信息"><a href="#查看-VG-信息" class="headerlink" title="查看 VG 信息"></a>查看 VG 信息</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vgs</span></span><br></pre></td></tr></table></figure><h3 id="创建-PV"><a href="#创建-PV" class="headerlink" title="创建 PV"></a>创建 PV</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pvcreate <span class="regexp">/dev/</span>vdb</span><br></pre></td></tr></table></figure><h3 id="扩展已有的-VG-容量"><a href="#扩展已有的-VG-容量" class="headerlink" title="扩展已有的 VG 容量"></a>扩展已有的 VG 容量</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vgextend vgdata <span class="regexp">/dev/</span>vdb</span><br></pre></td></tr></table></figure><blockquote><p><code>Couldn&#39;t&#39; create temporary archive name.</code><br>因为磁盘实在太小了或已经没有空间了，无法执行，删除一些数据就好了</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vgextend vgdata /dev/sda</span><br><span class="line">Volume<span class="built_in"> group </span><span class="string">"vgdata"</span> successfully extended</span><br></pre></td></tr></table></figure><h3 id="查看-VG-信息-1"><a href="#查看-VG-信息-1" class="headerlink" title="查看 VG 信息"></a>查看 VG 信息</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vgs</span></span><br></pre></td></tr></table></figure><h3 id="扩展已有-LV-容量"><a href="#扩展已有-LV-容量" class="headerlink" title="扩展已有 LV 容量"></a>扩展已有 LV 容量</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lvextend -L +<span class="number">99.99</span>G -n <span class="meta-keyword">/dev/</span>vgdata/lvdata</span><br><span class="line">lvextend -L +<span class="number">1020</span>M -n <span class="meta-keyword">/dev/</span>vgdata/lvdata</span><br></pre></td></tr></table></figure><blockquote><p>-L    # 指定逻辑卷的大小，单位为 <code>kKmMgGtT</code> 字节，也就是 <code>Size</code><br>-l    # 指定逻辑卷的大小，单位为 <code>PE</code> 数</p></blockquote><h3 id="重新加载逻辑卷"><a href="#重新加载逻辑卷" class="headerlink" title="重新加载逻辑卷"></a>重新加载逻辑卷</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 加载 ext 文件系统</span></span><br><span class="line">resize2fs <span class="meta-keyword">/dev/</span>vgdata/lvdata</span><br><span class="line"></span><br><span class="line"><span class="meta"># 加载 xfs 文件系统</span></span><br><span class="line">xfs_growfs <span class="meta-keyword">/dev/</span>vgdata/lvdata</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;LVM-磁盘扩展&quot;&gt;&lt;a href=&quot;#LVM-磁盘扩展&quot; class=&quot;headerlink&quot; title=&quot;LVM 磁盘扩展&quot;&gt;&lt;/a&gt;LVM 磁盘扩展&lt;/h2&gt;
    
    </summary>
    
      <category term="LVM笔记" scheme="http://www.gmlyo.com/categories/LVM%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="LVM 磁盘扩展" scheme="http://www.gmlyo.com/tags/LVM-%E7%A3%81%E7%9B%98%E6%89%A9%E5%B1%95/"/>
    
  </entry>
  
  <entry>
    <title>创建LVM</title>
    <link href="http://www.gmlyo.com//blog/2018/06/07/LVM%E5%88%9B%E5%BB%BA/"/>
    <id>http://www.gmlyo.com//blog/2018/06/07/LVM创建/</id>
    <published>2018-06-06T17:05:31.000Z</published>
    <updated>2018-06-07T19:29:24.751Z</updated>
    
    <content type="html"><![CDATA[<h2 id="创建-LVM"><a href="#创建-LVM" class="headerlink" title="创建 LVM"></a>创建 LVM</h2><blockquote><p>LVM 创建过程<br><code>创建PV</code> -&gt; <code>创建VG</code> -&gt; <code>创建LV</code> -&gt; <code>格式化LV</code> -&gt; <code>mount挂载</code></p><p>常用命令<br><code>pvcreate</code> 设备名<br><code>vgcreate</code> 卷组名 物理卷<br><code>lvcreate</code> <code>-L</code> 大小 <code>-n</code> 逻辑卷名 卷组名</p></blockquote><a id="more"></a><h3 id="LVM-常用命令表"><a href="#LVM-常用命令表" class="headerlink" title="LVM 常用命令表"></a>LVM 常用命令表</h3><table><thead><tr><th>功能</th><th>管理物理卷</th><th>管理卷组</th><th>管理逻辑卷</th></tr></thead><tbody><tr><td>Scan 扫描</td><td>pvscan</td><td>vgscan</td><td>lvscan</td></tr><tr><td>Create 创建</td><td><code>pvcreate</code></td><td><code>vgcreate</code></td><td><code>lvcreate</code></td></tr><tr><td>Display 显示</td><td>pvdisplay</td><td>vgdisplay</td><td>lvdisplay</td></tr><tr><td>Remove 删除</td><td>pvremove</td><td>vgremove</td><td>lvremove</td></tr><tr><td>Extend 扩展</td><td></td><td><code>vgextend</code></td><td><code>lvextend</code></td></tr><tr><td>Reduce 减少</td><td></td><td>vgreduce</td><td>lvreduce</td></tr></tbody></table><h3 id="安装-LVM"><a href="#安装-LVM" class="headerlink" title="安装 LVM"></a>安装 LVM</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> lvm2</span><br></pre></td></tr></table></figure><h3 id="创建-PV"><a href="#创建-PV" class="headerlink" title="创建 PV"></a>创建 PV</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pvcreate /dev/vdb</span><br><span class="line">Physical <span class="keyword">volume</span><span class="bash"> <span class="string">"/dev/vdb"</span> successfully created</span></span><br></pre></td></tr></table></figure><h3 id="创建-VG"><a href="#创建-VG" class="headerlink" title="创建 VG"></a>创建 VG</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vgcreate vgdata /dev/vdb</span><br><span class="line">Volume<span class="built_in"> group </span><span class="string">"vgdata"</span> successfully created</span><br></pre></td></tr></table></figure><h3 id="创建-LV"><a href="#创建-LV" class="headerlink" title="创建 LV"></a>创建 LV</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lvcreate -L <span class="number">49.99</span>G -n lvdata vgdata /dev/vdb</span><br><span class="line">Logical <span class="keyword">volume</span><span class="bash"> <span class="string">"lvdata"</span> created.</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">lvcreate -L 99.99G -n lvdata vgdata /dev/vdb</span></span><br><span class="line"><span class="bash">Logical volume <span class="string">"lvdata"</span> created.</span></span><br></pre></td></tr></table></figure><h3 id="文件系统格式化"><a href="#文件系统格式化" class="headerlink" title="文件系统格式化"></a>文件系统格式化</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 格式化 ext 文件系统</span></span><br><span class="line">mkfs.ext4 <span class="meta-keyword">/dev/</span>vgdata/lvdata</span><br><span class="line"></span><br><span class="line"><span class="meta"># 格式化 xfs 文件系统</span></span><br><span class="line">mkfs.xfs <span class="meta-keyword">/dev/</span>vgdata/lvdata</span><br></pre></td></tr></table></figure><h3 id="挂载逻辑卷到目录"><a href="#挂载逻辑卷到目录" class="headerlink" title="挂载逻辑卷到目录"></a>挂载逻辑卷到目录</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mkdir</span> -pv /<span class="class"><span class="keyword">data</span></span></span><br><span class="line"><span class="title">mount</span> /dev/vgdata/lvdata /<span class="class"><span class="keyword">data</span></span></span><br></pre></td></tr></table></figure><h3 id="编辑-etc-fstab"><a href="#编辑-etc-fstab" class="headerlink" title="编辑 /etc/fstab"></a>编辑 /etc/fstab</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="string">/etc/fstab</span></span><br><span class="line"><span class="string">...</span>省略<span class="string">...</span></span><br><span class="line"><span class="string">/dev/mapper/vgdata-lvdata</span>                 <span class="string">/data</span>   xfs     defaults        0 0</span><br><span class="line"><span class="string">...</span>省略<span class="string">...</span></span><br></pre></td></tr></table></figure><p>### </p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;创建-LVM&quot;&gt;&lt;a href=&quot;#创建-LVM&quot; class=&quot;headerlink&quot; title=&quot;创建 LVM&quot;&gt;&lt;/a&gt;创建 LVM&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;LVM 创建过程&lt;br&gt;&lt;code&gt;创建PV&lt;/code&gt; -&amp;gt; &lt;code&gt;创建VG&lt;/code&gt; -&amp;gt; &lt;code&gt;创建LV&lt;/code&gt; -&amp;gt; &lt;code&gt;格式化LV&lt;/code&gt; -&amp;gt; &lt;code&gt;mount挂载&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;常用命令&lt;br&gt;&lt;code&gt;pvcreate&lt;/code&gt; 设备名&lt;br&gt;&lt;code&gt;vgcreate&lt;/code&gt; 卷组名 物理卷&lt;br&gt;&lt;code&gt;lvcreate&lt;/code&gt; &lt;code&gt;-L&lt;/code&gt; 大小 &lt;code&gt;-n&lt;/code&gt; 逻辑卷名 卷组名&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="LVM笔记" scheme="http://www.gmlyo.com/categories/LVM%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="创建LVM" scheme="http://www.gmlyo.com/tags/%E5%88%9B%E5%BB%BALVM/"/>
    
  </entry>
  
  <entry>
    <title>Next添加文章结束标记</title>
    <link href="http://www.gmlyo.com//blog/2018/06/07/Next%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%BB%93%E6%9D%9F%E6%A0%87%E8%AE%B0/"/>
    <id>http://www.gmlyo.com//blog/2018/06/07/Next添加文章结束标记/</id>
    <published>2018-06-06T16:16:33.000Z</published>
    <updated>2018-06-06T16:24:22.224Z</updated>
    
    <content type="html"><![CDATA[<h3 id="添加文章结束标记"><a href="#添加文章结束标记" class="headerlink" title="添加文章结束标记"></a>添加文章结束标记</h3><blockquote><p>编辑 <code>/hexo/themes/next/layout/_macro/post.swig</code> 文件<br>在 <code>if theme.wechat_subscriber.enabled and not is_index</code> 上面添加如下代码</p></blockquote><a id="more"></a><h3 id="代码片段"><a href="#代码片段" class="headerlink" title="代码片段"></a>代码片段</h3><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color: #ccc;font-size:14px;"</span>&gt;</span>---------------- The End ----------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> theme.wechat_subscriber.enabled and not is_index %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">include</span></span> 'wechat-subscriber.swig' %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure><h3 id="显示效果"><a href="#显示效果" class="headerlink" title="显示效果"></a>显示效果</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">————— The <span class="keyword">End</span> —————</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;添加文章结束标记&quot;&gt;&lt;a href=&quot;#添加文章结束标记&quot; class=&quot;headerlink&quot; title=&quot;添加文章结束标记&quot;&gt;&lt;/a&gt;添加文章结束标记&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;编辑 &lt;code&gt;/hexo/themes/next/layout/_macro/post.swig&lt;/code&gt; 文件&lt;br&gt;在 &lt;code&gt;if theme.wechat_subscriber.enabled and not is_index&lt;/code&gt; 上面添加如下代码&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next添加文章结束标记" scheme="http://www.gmlyo.com/tags/Next%E6%B7%BB%E5%8A%A0%E6%96%87%E7%AB%A0%E7%BB%93%E6%9D%9F%E6%A0%87%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>Next添加音乐</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Next%E6%B7%BB%E5%8A%A0%E9%9F%B3%E4%B9%90/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Next添加音乐/</id>
    <published>2018-06-06T15:58:39.000Z</published>
    <updated>2018-06-06T16:03:39.766Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Next-添加音乐"><a href="#Next-添加音乐" class="headerlink" title="Next 添加音乐"></a>Next 添加音乐</h3><blockquote><p>去网易云音乐搜索喜欢的音乐，点击生成外链播放器，复制代码直接放到博文末尾即可<br><code>height</code> 设为 <code>0</code> 可隐藏播放器，但仍然可以播放音乐<br><code>auto</code> 设成 <code>0</code> 可手动播放，默认是 <code>1</code> 自动播放</p></blockquote><a id="more"></a><blockquote><p>编辑 <code>/hexo/themes/next/layout/_custom/sidebar.swig</code> 文件里，播放器会显示在站点预览中<br>或<br>编辑 <code>/hexo/themes/next/layout/_macro/sidebar.swig</code> 文件里</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 将代码粘贴到一个合适的位置</span></span><br><span class="line">&lt;iframe <span class="attribute">frameborder</span>=<span class="string">"no"</span> <span class="attribute">border</span>=<span class="string">"0"</span> <span class="attribute">marginwidth</span>=<span class="string">"0"</span> <span class="attribute">marginheight</span>=<span class="string">"0"</span> <span class="attribute">width</span>=330 <span class="attribute">height</span>=110 </span><br><span class="line"><span class="attribute">src</span>=<span class="string">"//music.163.com/outchain/player?type=0&amp;id=2188265841&amp;auto=1&amp;height=90"</span>&gt;&lt;/iframe&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Next-添加音乐&quot;&gt;&lt;a href=&quot;#Next-添加音乐&quot; class=&quot;headerlink&quot; title=&quot;Next 添加音乐&quot;&gt;&lt;/a&gt;Next 添加音乐&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;去网易云音乐搜索喜欢的音乐，点击生成外链播放器，复制代码直接放到博文末尾即可&lt;br&gt;&lt;code&gt;height&lt;/code&gt; 设为 &lt;code&gt;0&lt;/code&gt; 可隐藏播放器，但仍然可以播放音乐&lt;br&gt;&lt;code&gt;auto&lt;/code&gt; 设成 &lt;code&gt;0&lt;/code&gt; 可手动播放，默认是 &lt;code&gt;1&lt;/code&gt; 自动播放&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next添加音乐" scheme="http://www.gmlyo.com/tags/Next%E6%B7%BB%E5%8A%A0%E9%9F%B3%E4%B9%90/"/>
    
  </entry>
  
  <entry>
    <title>Hexo添加分类及标签</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Hexo%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB%E5%8F%8A%E6%A0%87%E7%AD%BE/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Hexo添加分类及标签/</id>
    <published>2018-06-06T14:49:07.000Z</published>
    <updated>2018-06-06T15:12:27.741Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Hexo添加分类及标签"><a href="#Hexo添加分类及标签" class="headerlink" title="Hexo添加分类及标签"></a>Hexo添加分类及标签</h3><h3 id="创建-分类-选项"><a href="#创建-分类-选项" class="headerlink" title="创建 分类 选项"></a>创建 <code>分类</code> 选项</h3><blockquote><p>生成 <code>分类</code> 页并添加 <code>type</code> 属性<br>打开命令行，进入博客所在文件夹，执行命令</p></blockquote><a id="more"></a><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new<span class="built_in"> page </span>categories</span><br></pre></td></tr></table></figure><blockquote><p>成功后会提示</p></blockquote><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO  Created: ~<span class="regexp">/hexo/</span><span class="keyword">source</span><span class="regexp">/categories/i</span>ndex.md</span><br></pre></td></tr></table></figure><blockquote><p>根据上面的路径，找到 <code>index.md</code> 这个文件，打开后默认内容是这样的</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-06</span><span class="bullet">-06</span> <span class="number">22</span><span class="string">:49:07</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><blockquote><p>添加 <code>type: &quot;categories&quot;</code> 到内容中，添加后是这样的</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-06</span><span class="bullet">-06</span> <span class="number">22</span><span class="string">:49:07</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="给文章添加-“categories”-属性"><a href="#给文章添加-“categories”-属性" class="headerlink" title="给文章添加 “categories” 属性"></a>给文章添加 <code>“categories”</code> 属性</h3><blockquote><p>打开需要添加分类的文章，为其添加 <code>categories</code> 属性<br>下方的 <code>categories: Hexo笔记</code> 表示添加这篇文章到 <code>Hexo笔记</code> 这个分类<br>注意：<code>hexo</code> 一篇文章只能属于一个分类，也就是说如果在 <code>- Hexo笔记</code> 下方添加 <code>- xxx</code><br><code>hexo</code> 不会产生两个分类，而是把分类嵌套（即该文章属于 <code>- Hexo笔记</code> 下的 <code>- xxx</code> 分类）</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo添加分类及标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-06</span><span class="bullet">-06</span> <span class="number">22</span><span class="string">:44:41</span></span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo笔记</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><blockquote><p>至此，成功给文章添加分类，点击首页的 <code>分类</code> 可以看到该分类下的所有文章<br>当然，只有添加了 <code>categories: xxx</code> 的文章才会被收录到首页的 <code>分类</code> 中</p></blockquote><h3 id="创建标签选项"><a href="#创建标签选项" class="headerlink" title="创建标签选项"></a>创建<code>标签</code>选项</h3><blockquote><p>生成 <code>标签</code> 页并添加 <code>type</code> 属性<br>打开命令行，进入博客所在文件夹，执行命令</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new<span class="built_in"> page </span>tags</span><br></pre></td></tr></table></figure><blockquote><p>成功后会提示</p></blockquote><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO  Created: ~<span class="regexp">/hexo/</span><span class="keyword">source</span><span class="regexp">/tags/i</span>ndex.md</span><br></pre></td></tr></table></figure><blockquote><p>根据上面的路径，找到<code>index.md</code>这个文件，打开后默认内容是这样的</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-06</span><span class="bullet">-06</span> <span class="number">22</span><span class="string">:49:07</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><blockquote><p>添加 <code>type: &quot;tags&quot;</code> 到内容中，添加后是这样的</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">文章分类</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-06</span><span class="bullet">-06</span> <span class="number">22</span><span class="string">:49:07</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"tags"</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><blockquote><p>给文章添加<code>tags</code>属性<br>打开需要添加标签的文章，为其添加 <code>tags</code> 属性<br>下方的<br><code>tags:</code><br><code>Hexo添加分类及标签</code><br><code>- 表格</code><br><code>- 表单验证</code><br>就是这篇文章的标签了</p></blockquote><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">Hexo添加分类及标签</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018</span><span class="bullet">-06</span><span class="bullet">-06</span> <span class="number">22</span><span class="string">:49:07</span></span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo笔记</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Hexo添加分类及标签</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">表格</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">表单验证</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><blockquote><p>至此，成功给文章添加分类，点击首页的<code>标签</code>可以看到该标签下的所有文章<br>当然，只有添加了 <code>tags: xxx</code> 的文章才会被收录到首页的<code>标签</code>中<br>细心的朋友可能已经发现，这两个的设置几乎一模一样！是的，没错，思路都是一样的<br>所以我们可以打开 \hexo\scaffolds/post.md 文件，在 <code>tages:</code>上面加入<code>categories:</code><br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">vim</span> <span class="string">/hexo/scaffolds/post.md</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">&#123;&#123;</span> <span class="string">title</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">date:</span> <span class="string">&#123;&#123;</span> <span class="string">date</span> <span class="string">&#125;&#125;</span></span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>保存后执行<code>hexo new &quot;文章名&quot;</code>命令生成的文件，页面里就有<code>categories:</code>项了<br><code>\hexo\scaffolds\</code> 目录下，是新建页面的模板，执行新建命令时，是根据这里的模板页来完成的，所以可以在这里根据你自己的需求添加一些默认值</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Hexo添加分类及标签&quot;&gt;&lt;a href=&quot;#Hexo添加分类及标签&quot; class=&quot;headerlink&quot; title=&quot;Hexo添加分类及标签&quot;&gt;&lt;/a&gt;Hexo添加分类及标签&lt;/h3&gt;&lt;h3 id=&quot;创建-分类-选项&quot;&gt;&lt;a href=&quot;#创建-分类-选项&quot; class=&quot;headerlink&quot; title=&quot;创建 分类 选项&quot;&gt;&lt;/a&gt;创建 &lt;code&gt;分类&lt;/code&gt; 选项&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;生成 &lt;code&gt;分类&lt;/code&gt; 页并添加 &lt;code&gt;type&lt;/code&gt; 属性&lt;br&gt;打开命令行，进入博客所在文件夹，执行命令&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Hexo笔记" scheme="http://www.gmlyo.com/categories/Hexo%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Hexo添加分类及标签" scheme="http://www.gmlyo.com/tags/Hexo%E6%B7%BB%E5%8A%A0%E5%88%86%E7%B1%BB%E5%8F%8A%E6%A0%87%E7%AD%BE/"/>
    
  </entry>
  
  <entry>
    <title>Hexo设置网站的图标Favicon</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Hexo%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%AB%99%E7%9A%84%E5%9B%BE%E6%A0%87Favicon/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Hexo设置网站的图标Favicon/</id>
    <published>2018-06-06T14:16:45.000Z</published>
    <updated>2018-06-06T14:27:16.183Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Hexo-设置网站的图标-Favicon"><a href="#Hexo-设置网站的图标-Favicon" class="headerlink" title="Hexo 设置网站的图标 Favicon"></a>Hexo 设置网站的图标 Favicon</h3><blockquote><p>ico图标使用 <code>32x32</code><br>去别的网站下载或 PS 制作，并将图标名称改为 favicon.ico<br>然后把图标放在 <code>\next\themes\next\source\images\</code> 目录下<br>也可以放在 <code>hexo\source\images</code> 目录下，这个目录没有可以自己手动创建</p></blockquote><a id="more"></a><h3 id="修改-next主题配置文件，-next-themes-next-config-yml-文件"><a href="#修改-next主题配置文件，-next-themes-next-config-yml-文件" class="headerlink" title="修改 next主题配置文件，\next\themes\next\_config.yml 文件"></a>修改 <code>next主题配置文件</code>，<code>\next\themes\next\_config.yml</code> 文件</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">favicon:</span></span><br><span class="line"><span class="symbol">  small:</span> <span class="meta-keyword">/images/</span>favicon<span class="number">-16</span>x16-next.png</span><br><span class="line">  <span class="meta">#medium: /images/favicon-32x32-next.png</span></span><br><span class="line"><span class="symbol">  medium:</span> <span class="meta-keyword">/images/</span>favicon.ico</span><br><span class="line"><span class="symbol">  apple_touch_icon:</span> <span class="meta-keyword">/images/</span>apple-touch-icon-next.png</span><br><span class="line"><span class="symbol">  safari_pinned_tab:</span> <span class="meta-keyword">/images/</span>logo.svg</span><br><span class="line">  <span class="meta">#android_manifest: /images/manifest.json</span></span><br><span class="line">  <span class="meta">#ms_browserconfig: /images/browserconfig.xml</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Hexo-设置网站的图标-Favicon&quot;&gt;&lt;a href=&quot;#Hexo-设置网站的图标-Favicon&quot; class=&quot;headerlink&quot; title=&quot;Hexo 设置网站的图标 Favicon&quot;&gt;&lt;/a&gt;Hexo 设置网站的图标 Favicon&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ico图标使用 &lt;code&gt;32x32&lt;/code&gt;&lt;br&gt;去别的网站下载或 PS 制作，并将图标名称改为 favicon.ico&lt;br&gt;然后把图标放在 &lt;code&gt;\next\themes\next\source\images\&lt;/code&gt; 目录下&lt;br&gt;也可以放在 &lt;code&gt;hexo\source\images&lt;/code&gt; 目录下，这个目录没有可以自己手动创建&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Hexo笔记" scheme="http://www.gmlyo.com/categories/Hexo%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Hexo设置网站的图标Favicon" scheme="http://www.gmlyo.com/tags/Hexo%E8%AE%BE%E7%BD%AE%E7%BD%91%E7%AB%99%E7%9A%84%E5%9B%BE%E6%A0%87Favicon/"/>
    
  </entry>
  
  <entry>
    <title>Next添加访问量</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Next%E6%B7%BB%E5%8A%A0%E8%AE%BF%E9%97%AE%E9%87%8F/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Next添加访问量/</id>
    <published>2018-06-06T14:03:43.000Z</published>
    <updated>2018-06-06T15:30:52.518Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Next添加访问量"><a href="#Next添加访问量" class="headerlink" title="Next添加访问量"></a>Next添加访问量</h3><blockquote><p>使用 Next 主题自带的不蒜子统计，仅限于在文章页面显示阅读量，不在首页显示</p></blockquote><a id="more"></a><h3 id="修改-themes-next-config-yml-文件"><a href="#修改-themes-next-config-yml-文件" class="headerlink" title="修改 themes\next\ _config.yml 文件"></a>修改 <code>themes\next\ _config.yml</code> 文件</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  # count values only <span class="keyword">if</span> the other configs are <span class="literal">false</span></span><br><span class="line">  enable: <span class="literal">true</span></span><br><span class="line">  # custom uv span <span class="keyword">for</span> the whole site</span><br><span class="line">  site_uv: <span class="literal">true</span></span><br><span class="line">  site_uv_header: &lt;i <span class="attribute">class</span>=<span class="string">"fa fa-user"</span>&gt;&lt;/i&gt; 访问人数(UV)</span><br><span class="line">  site_uv_footer: 人</span><br><span class="line">  # custom pv span <span class="keyword">for</span> the whole site</span><br><span class="line">  site_pv: <span class="literal">true</span></span><br><span class="line">  site_pv_header: &lt;i <span class="attribute">class</span>=<span class="string">"fa fa-eye"</span>&gt;&lt;/i&gt; 总访问量(PV)</span><br><span class="line">  site_pv_footer: 次</span><br><span class="line">  # custom pv span <span class="keyword">for</span> one<span class="built_in"> page </span>only</span><br><span class="line">  page_pv: <span class="literal">true</span></span><br><span class="line">  page_pv_header: &lt;i <span class="attribute">class</span>=<span class="string">"fa fa-file-o"</span>&gt;&lt;/i&gt; 浏览</span><br><span class="line">  page_pv_footer: 次</span><br></pre></td></tr></table></figure><blockquote><p>总访问量 <code>(PV)</code> 总访问量<br>独立访客 <code>(UV)</code> 访问人数<br>网站的浏览次数为 <code>PV</code><br>网站的访客数为 <code>UV</code><br><code>PV</code> 计算方式，单个用户连续点击 N 篇文章，记录 N 次访问量<br><code>UV</code> 计算方式，单个用户连续点击 N 篇文章，只记录 1 次访客数<br>可以根据需要添加相应的统计功能</p></blockquote><h3 id="查看底部显示效果"><a href="#查看底部显示效果" class="headerlink" title="查看底部显示效果"></a>查看底部显示效果</h3>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Next添加访问量&quot;&gt;&lt;a href=&quot;#Next添加访问量&quot; class=&quot;headerlink&quot; title=&quot;Next添加访问量&quot;&gt;&lt;/a&gt;Next添加访问量&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;使用 Next 主题自带的不蒜子统计，仅限于在文章页面显示阅读量，不在首页显示&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next添加访问量" scheme="http://www.gmlyo.com/tags/Next%E6%B7%BB%E5%8A%A0%E8%AE%BF%E9%97%AE%E9%87%8F/"/>
    
  </entry>
  
  <entry>
    <title>Next修改小型代码块颜色</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Next%E4%BF%AE%E6%94%B9%E5%B0%8F%E5%9E%8B%E4%BB%A3%E7%A0%81%E5%9D%97%E9%A2%9C%E8%89%B2/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Next修改小型代码块颜色/</id>
    <published>2018-06-06T13:01:33.000Z</published>
    <updated>2018-06-06T13:06:20.985Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Next-修改小型代码块颜色"><a href="#Next-修改小型代码块颜色" class="headerlink" title="Next 修改小型代码块颜色"></a>Next 修改小型代码块颜色</h3><blockquote><p>修改 <code>\themes\next\source\css\ _variables\base.styl</code> 文件<br>可以加入自定义颜色，如下中已经给出了许多种颜色</p></blockquote><a id="more"></a><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Colors</span><br><span class="line">// colors for use across theme.</span><br><span class="line">// --------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="meta">$</span><span class="bash">whitesmoke   = <span class="comment">#f5f5f5</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">gainsboro    = <span class="comment">#eee</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">gray-lighter = <span class="comment">#ddd</span></span></span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line">.</span><br><span class="line"><span class="meta">$</span><span class="bash">blue         = <span class="comment">#0684bd</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">blue-deep    = <span class="comment">#262a30</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash">orange       = <span class="comment">#fc6423</span></span></span><br></pre></td></tr></table></figure><h3 id="修改-code-background-与-code-foreground-的值"><a href="#修改-code-background-与-code-foreground-的值" class="headerlink" title="修改 $code-background 与 $code-foreground 的值"></a>修改 $code-background 与 $code-foreground 的值</h3><blockquote><p>以下的各个参数自己根据需求进行设置即可</p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Code &amp; Code Blocks</span></span><br><span class="line"><span class="comment">// --------------------------------------------------</span></span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">font-family</span>               = <span class="variable">$font</span>-family-monospace</span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">font-size</span>                 = <span class="number">13px</span></span><br><span class="line"><span class="variable">$code</span>-foreground                = <span class="variable">$black</span>-light  <span class="comment">//设置成自己喜欢的颜色即可</span></span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">background</span>                = <span class="variable">$gainsboro</span>    //设置成自己喜欢的颜色即可</span><br><span class="line"><span class="variable">$code</span>-<span class="attribute">border-radius</span>             = <span class="number">4px</span></span><br></pre></td></tr></table></figure><blockquote><p>在 <code>\themes\next\source\css\ _variables\base.styl</code> 文件内还有很多的参数，可以酌情进行修改</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Next-修改小型代码块颜色&quot;&gt;&lt;a href=&quot;#Next-修改小型代码块颜色&quot; class=&quot;headerlink&quot; title=&quot;Next 修改小型代码块颜色&quot;&gt;&lt;/a&gt;Next 修改小型代码块颜色&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;修改 &lt;code&gt;\themes\next\source\css\ _variables\base.styl&lt;/code&gt; 文件&lt;br&gt;可以加入自定义颜色，如下中已经给出了许多种颜色&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next修改小型代码块颜色" scheme="http://www.gmlyo.com/tags/Next%E4%BF%AE%E6%94%B9%E5%B0%8F%E5%9E%8B%E4%BB%A3%E7%A0%81%E5%9D%97%E9%A2%9C%E8%89%B2/"/>
    
  </entry>
  
  <entry>
    <title>Next头像圆形旋转</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Next%E5%A4%B4%E5%83%8F%E5%9C%86%E5%BD%A2%E6%97%8B%E8%BD%AC/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Next头像圆形旋转/</id>
    <published>2018-06-05T18:59:14.000Z</published>
    <updated>2018-06-06T13:55:15.770Z</updated>
    
    <content type="html"><![CDATA[<h3 id="头像变成圆形，鼠标停留在上面发生旋转效果"><a href="#头像变成圆形，鼠标停留在上面发生旋转效果" class="headerlink" title="头像变成圆形，鼠标停留在上面发生旋转效果"></a>头像变成圆形，鼠标停留在上面发生旋转效果</h3><blockquote><p>介绍一下实现头像圆形，鼠标经过旋转或者一直让旋转效果<br>修改 Hexo 目录下 <code>\themes\next\source\css\_common\components\sidebar\sidebar-author.styl</code> 文件</p></blockquote><a id="more"></a><h3 id="头像圆形修改"><a href="#头像圆形修改" class="headerlink" title="头像圆形修改"></a>头像圆形修改</h3><blockquote><p>修改 <code>sidebar-author.styl</code> 文件中 <code>.site-author-image</code> CSS 样式如下</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*头像圆形*/</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="鼠标经过旋转修改"><a href="#鼠标经过旋转修改" class="headerlink" title="鼠标经过旋转修改"></a>鼠标经过旋转修改</h3><blockquote><p>修改 <code>sidebar-author.styl</code> 文件，添加 CSS 样式 <code>img:hover</code> 如下代码</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 鼠标经过头像旋转360度 */</span></span><br><span class="line">  <span class="attribute">-webkit-transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">  <span class="attribute">-moz-transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>修改 <code>sidebar-author.styl</code> 文件中 <code>.site-author-image</code> CSS 样式如下</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 头像圆形 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#333</span>sf;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 鼠标经过头像旋转360度 */</span></span><br><span class="line">  <span class="attribute">-webkit-transition</span>: -webkit-transform <span class="number">1.5s</span> ease-out;</span><br><span class="line">  <span class="attribute">-moz-transition</span>: -moz-transform <span class="number">1.5s</span> ease-out;</span><br><span class="line">  <span class="attribute">transition</span>: transform <span class="number">1.5s</span> ease-out;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>方法二：修改 <code>themes/next/source/css/_common/components/sidebar/sidebar-author.styl</code></p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">96px</span>;</span><br><span class="line">  <span class="attribute">height</span>: auto;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">2px</span> solid <span class="number">#333</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="comment">/* start*/</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span></span><br><span class="line">  webkit-transition: <span class="number">1.4s</span> all;</span><br><span class="line">  <span class="attribute">moz-transition</span>: <span class="number">1.4s</span> all;</span><br><span class="line">  <span class="attribute">ms-transition</span>: <span class="number">1.4s</span> all;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">1.4s</span> all;</span><br><span class="line">  <span class="comment">/* end */</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* start */</span></span><br><span class="line"><span class="selector-class">.site-author-image</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#55DAE1</span>;</span><br><span class="line">  <span class="attribute">webkit-transform</span>: <span class="built_in">rotate</span>(360deg) <span class="built_in">scale</span>(1.1);</span><br><span class="line">  <span class="attribute">moz-transform</span>: <span class="built_in">rotate</span>(360deg) <span class="built_in">scale</span>(1.1);</span><br><span class="line">  <span class="attribute">ms-transform</span>: <span class="built_in">rotate</span>(360deg) <span class="built_in">scale</span>(1.1);</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">rotate</span>(360deg) <span class="built_in">scale</span>(1.1);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* end */</span></span><br></pre></td></tr></table></figure><h3 id="头像循环旋转效果修改"><a href="#头像循环旋转效果修改" class="headerlink" title="头像循环旋转效果修改"></a>头像循环旋转效果修改</h3><blockquote><p>修改 <code>sidebar-author.styl</code> 文件，添加如下代码</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Z 轴旋转动画 */</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotateZ</span>(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@-<span class="keyword">moz</span>-<span class="keyword">keyframes</span> play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotateZ</span>(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> play &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(0deg);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">rotateZ</span>(360deg);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>修改 <code>sidebar-author.styl</code> 文件中 <code>.site-author-image</code> CSS 样式如下</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.site-author-image</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">padding</span>: $site-author-image-padding;</span><br><span class="line">  <span class="attribute">max-width</span>: $site-author-image-width;</span><br><span class="line">  <span class="attribute">height</span>: $site-author-image-height;</span><br><span class="line">  <span class="attribute">border</span>: $site-author-image-border-width solid $site-author-image-border-color;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 头像圆形 */</span></span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">-moz-border-radius</span>: <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: inset <span class="number">0</span> -<span class="number">1px</span> <span class="number">0</span> <span class="number">#333</span>sf;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 设置循环动画：animation:动画名称 动画播放时长单位秒或微秒</span></span><br><span class="line"><span class="comment">    动画播放的速度曲线linear为匀速 动画播放次数infinite为循环播放; */</span></span><br><span class="line">  <span class="attribute">-webkit-animation</span>: play <span class="number">3s</span> linear infinite;</span><br><span class="line">  <span class="attribute">-moz-animation</span>: play <span class="number">3s</span> linear infinite;</span><br><span class="line">  <span class="attribute">animation</span>: play <span class="number">3s</span> linear infinite;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 鼠标经过头像旋转360度</span></span><br><span class="line"><span class="comment">  -webkit-transition: -webkit-transform 1.5s ease-out;</span></span><br><span class="line"><span class="comment">  -moz-transition: -moz-transform 1.5s ease-out;</span></span><br><span class="line"><span class="comment">  transition: transform 1.5s ease-out;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>鼠标经过停止头像旋转：修改 <code>sidebar-author.styl</code> 文件，添加 CSS 样式 <code>img:hover</code> 如下代码</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">img</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="comment">/* 鼠标经过停止头像旋转 */</span></span><br><span class="line">  <span class="attribute">-webkit-animation-play-state</span>:paused;</span><br><span class="line">  <span class="attribute">animation-play-state</span>:paused;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/* 鼠标经过头像旋转360度</span></span><br><span class="line"><span class="comment">  -webkit-transform: rotateZ(360deg);</span></span><br><span class="line"><span class="comment">  -moz-transform: rotateZ(360deg);</span></span><br><span class="line"><span class="comment">  transform: rotateZ(360deg);*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;头像变成圆形，鼠标停留在上面发生旋转效果&quot;&gt;&lt;a href=&quot;#头像变成圆形，鼠标停留在上面发生旋转效果&quot; class=&quot;headerlink&quot; title=&quot;头像变成圆形，鼠标停留在上面发生旋转效果&quot;&gt;&lt;/a&gt;头像变成圆形，鼠标停留在上面发生旋转效果&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;介绍一下实现头像圆形，鼠标经过旋转或者一直让旋转效果&lt;br&gt;修改 Hexo 目录下 &lt;code&gt;\themes\next\source\css\_common\components\sidebar\sidebar-author.styl&lt;/code&gt; 文件&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next头像圆形旋转" scheme="http://www.gmlyo.com/tags/Next%E5%A4%B4%E5%83%8F%E5%9C%86%E5%BD%A2%E6%97%8B%E8%BD%AC/"/>
    
  </entry>
  
  <entry>
    <title>Next设置首页隐藏指定文章</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Next%E8%AE%BE%E7%BD%AE%E9%A6%96%E9%A1%B5%E9%9A%90%E8%97%8F%E6%8C%87%E5%AE%9A%E6%96%87%E7%AB%A0/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Next设置首页隐藏指定文章/</id>
    <published>2018-06-05T17:08:59.000Z</published>
    <updated>2018-06-06T05:54:19.552Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Next设置首页隐藏指定文章"><a href="#Next设置首页隐藏指定文章" class="headerlink" title="Next设置首页隐藏指定文章"></a>Next设置首页隐藏指定文章</h3><blockquote><p>修改 next 主题文件夹下的 layout 中的 index.swig 文件<br>定位修改 post_template.render(post, true)</p></blockquote><a id="more"></a><figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml">\themes\next\layout\index.swig</span></span><br><span class="line"><span class="xml">...省略...</span></span><br><span class="line"><span class="xml"></span><span class="template-tag">&#123;% <span class="name"><span class="name">block</span></span> content %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">id</span>=<span class="string">"posts"</span> <span class="attr">class</span>=<span class="string">"posts-expand"</span>&gt;</span></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> post <span class="keyword">in</span> page.posts %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">      </span><span class="template-tag">&#123;% <span class="name"><span class="name">if</span></span> post.visible !== 'hide' %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">      </span><span class="template-variable">&#123;&#123; post_template.render(post, true) &#125;&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">      </span><span class="template-tag">&#123;% <span class="name"><span class="name">endif</span></span> %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">    </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span><span class="xml"></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"><span class="xml">...省略...</span></span><br></pre></td></tr></table></figure><blockquote><p>其中修改的是为文章的首页显示添加判断条件</p></blockquote><h3 id="在新的-post-中添加-visible-字段来控制是否首页显示"><a href="#在新的-post-中添加-visible-字段来控制是否首页显示" class="headerlink" title="在新的 post 中添加 visible 字段来控制是否首页显示"></a>在新的 post 中添加 visible 字段来控制是否首页显示</h3><blockquote><p>例如：当前这篇文章</p></blockquote><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: Next设置首页隐藏指定文章</span><br><span class="line">date: 2018<span class="string">-06</span><span class="string">-06</span> 01:08:59</span><br><span class="line">categories: Next笔记</span><br><span class="line"><span class="keyword">tags:</span> Next设置首页隐藏指定文章</span><br><span class="line">visible: hide</span><br></pre></td></tr></table></figure><blockquote><p>这里如果加上 hide 则该文章就不会在文章首页显示，如果留空则表示默认显示</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Next设置首页隐藏指定文章&quot;&gt;&lt;a href=&quot;#Next设置首页隐藏指定文章&quot; class=&quot;headerlink&quot; title=&quot;Next设置首页隐藏指定文章&quot;&gt;&lt;/a&gt;Next设置首页隐藏指定文章&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;修改 next 主题文件夹下的 layout 中的 index.swig 文件&lt;br&gt;定位修改 post_template.render(post, true)&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next设置首页隐藏指定文章" scheme="http://www.gmlyo.com/tags/Next%E8%AE%BE%E7%BD%AE%E9%A6%96%E9%A1%B5%E9%9A%90%E8%97%8F%E6%8C%87%E5%AE%9A%E6%96%87%E7%AB%A0/"/>
    
  </entry>
  
  <entry>
    <title>Shadowsocks 安装</title>
    <link href="http://www.gmlyo.com//blog/2018/06/06/Shadowsocks%E5%AE%89%E8%A3%85/"/>
    <id>http://www.gmlyo.com//blog/2018/06/06/Shadowsocks安装/</id>
    <published>2018-06-05T16:47:43.000Z</published>
    <updated>2018-06-05T19:05:37.814Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Shadowsocks-安装"><a href="#Shadowsocks-安装" class="headerlink" title="Shadowsocks 安装"></a>Shadowsocks 安装</h3><a id="more"></a><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install </span>python-pip</span><br><span class="line">pip <span class="keyword">install </span>--upgrade pip</span><br><span class="line">pip <span class="keyword">install </span><span class="keyword">shadowsocks</span></span><br><span class="line"><span class="keyword">which </span>ssserver</span><br><span class="line">pip <span class="keyword">install </span>M2Crypto</span><br><span class="line">pip <span class="keyword">install </span>gevent</span><br></pre></td></tr></table></figure><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/systemd/system/shadowsocks.service</span><br><span class="line">[Unit]</span><br><span class="line">Description=Shadowsocks</span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">TimeoutStartSec=0</span><br><span class="line">PIDFile=/data/shadowsocks/var/run/ssserver.pid</span><br><span class="line">ExecStart=/usr/bin/ssserver -c /data/shadowsocks/conf/shadowsocks.json -d start \</span><br><span class="line">    --pid-file /data/shadowsocks/var/run/ssserver.pid \</span><br><span class="line">    --log-file /data/shadowsocks/logs/ssserver.log</span><br><span class="line">Restart=on-abort</span><br><span class="line">RestartSec=10s</span><br><span class="line">PrivateTmp=true</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br><span class="line"></span><br><span class="line">tail -f /data/shadowsocks/logs/ssserver.log</span><br></pre></td></tr></table></figure><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mkdir</span> -pv /<span class="class"><span class="keyword">data</span>/shadowsocks/&#123;<span class="title">conf</span>,<span class="title">logs</span>,<span class="title">var</span>/<span class="title">run</span>&#125;</span></span><br><span class="line"><span class="title">cd</span> /<span class="class"><span class="keyword">data</span>/shadowsocks/</span></span><br><span class="line"><span class="title">vim</span> shadowsocks.json</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"server"</span>:<span class="string">"149.28.231.171"</span>,</span><br><span class="line">    <span class="string">"local_address"</span>:<span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="string">"local_port"</span>:<span class="number">1080</span>,</span><br><span class="line">    <span class="string">"port_password"</span>:&#123;</span><br><span class="line">        <span class="string">"8888"</span>:<span class="string">"gmlyo"</span>,</span><br><span class="line">        <span class="string">"8889"</span>:<span class="string">"glmyo"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"timeout"</span>:<span class="number">300</span>,</span><br><span class="line">    <span class="string">"method"</span>:<span class="string">"aes-256-cfb"</span>,</span><br><span class="line">    <span class="string">"fast_open"</span>:false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl start <span class="keyword">shadowsocks</span></span><br><span class="line"><span class="keyword">systemctl </span>-l status <span class="keyword">shadowsocks</span></span><br><span class="line"><span class="keyword">systemctl </span>enable <span class="keyword">shadowsocks</span></span><br><span class="line"><span class="keyword">systemctl </span>stop <span class="keyword">shadowsocks</span></span><br><span class="line"><span class="keyword">systemctl </span>restart <span class="keyword">shadowsocks</span></span><br><span class="line"><span class="keyword">journalctl </span>-fu <span class="keyword">shadowsocks</span></span><br></pre></td></tr></table></figure><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br><span class="line">firewall-<span class="keyword">cmd</span><span class="bash"> --list-all</span></span><br><span class="line"><span class="bash">firewall-cmd --list-services</span></span><br><span class="line"><span class="bash">firewall-cmd --get-services</span></span><br><span class="line"><span class="bash">firewall-cmd --zone=public --add-port=8888/tcp --permanent</span></span><br><span class="line"><span class="bash">firewall-cmd --zone=public --add-port=8889/tcp --permanent</span></span><br><span class="line"><span class="bash">firewall-cmd --reload</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">firewall-cmd --zone=public --query-port=1985/tcp</span></span><br><span class="line"><span class="bash">firewall-cmd --zone=public --list-ports</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Shadowsocks-安装&quot;&gt;&lt;a href=&quot;#Shadowsocks-安装&quot; class=&quot;headerlink&quot; title=&quot;Shadowsocks 安装&quot;&gt;&lt;/a&gt;Shadowsocks 安装&lt;/h3&gt;
    
    </summary>
    
      <category term="Shadowsocks笔记" scheme="http://www.gmlyo.com/categories/Shadowsocks%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Shadowsocks 安装" scheme="http://www.gmlyo.com/tags/Shadowsocks-%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>Tomcat APR 安装</title>
    <link href="http://www.gmlyo.com//blog/2018/06/05/Tomcat%20APR%20%E5%AE%89%E8%A3%85/"/>
    <id>http://www.gmlyo.com//blog/2018/06/05/Tomcat APR 安装/</id>
    <published>2018-06-05T09:22:21.000Z</published>
    <updated>2018-06-06T13:43:25.061Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Tomcat-APR-安装"><a href="#Tomcat-APR-安装" class="headerlink" title="Tomcat APR 安装"></a>Tomcat APR 安装</h3><blockquote><p>Tomcat 的 APR(Apache portable Run-time libraries)<br>是 Apache HTTP 服务的支持库，提供了一组映射到下层操作系统的 API<br>是用来改善 Tomcat 对静态文件的处理性能，同时如果使用了 HTTPS 方式传输的话，也可以提升 SSL 的处理性能。<br>默认情况下，Tomcat 是用 BIO 的方式来实现网络通信的，性能非常低。<br>而 APR 使用 JNI 的方式来读取文件以及进行网络传输，从操作系统级别来解决异步的 I/O 问题，大幅度的提高性能。<br>如果操作系统不支持某个特定的功能，APR 将提供一个模拟的实现<br>这样程序员使用 APR 编写真正可在不同平台上移植的程序</p></blockquote><a id="more"></a><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Tomcat 和 <span class="keyword">JDK</span></span><br><span class="line"><span class="keyword">yum </span><span class="keyword">install </span>-y apr-devel</span><br><span class="line">yum <span class="keyword">install </span>-y gcc gcc-devel</span><br><span class="line">yum <span class="keyword">install </span>-y openssl openssl-devel</span><br></pre></td></tr></table></figure><h3 id="下载-apr"><a href="#下载-apr" class="headerlink" title="下载 apr"></a>下载 apr</h3><blockquote><p>下载地址：<a href="https://apr.apache.org/download.cgi" target="_blank" rel="noopener">https://apr.apache.org/download.cgi</a></p></blockquote><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cd <span class="regexp">/data/</span>tools/</span><br><span class="line">wget -c <span class="string">http:</span><span class="comment">//mirrors.shu.edu.cn/apache//apr/apr-1.6.3.tar.gz</span></span><br><span class="line">wget -c <span class="string">http:</span><span class="comment">//mirrors.shu.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span></span><br><span class="line">wget -c <span class="string">http:</span><span class="comment">//mirrors.shu.edu.cn/apache//apr/apr-iconv-1.2.2.tar.gz</span></span><br></pre></td></tr></table></figure><h3 id="安装-apr"><a href="#安装-apr" class="headerlink" title="安装 apr"></a>安装 apr</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压并进入解压目录</span></span><br><span class="line"><span class="built_in">cd</span> /data/tools/</span><br><span class="line">tar -zxvf apr-1.6.3.tar.gz</span><br><span class="line"><span class="built_in">cd</span> apr-1.6.3/</span><br><span class="line"><span class="comment"># 配置，安装在 /data/ 目录下</span></span><br><span class="line">./configure --prefix=/data/apr</span><br><span class="line"><span class="comment"># 报错信息</span></span><br><span class="line">config.status: executing libtool commands</span><br><span class="line">rm: cannot remove <span class="string">'libtoolT'</span>: No such file or directory</span><br><span class="line">config.status: executing default commands</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解决方法</span></span><br><span class="line"><span class="comment"># 编辑 configure 文件</span></span><br><span class="line">把 <span class="variable">$RM</span> <span class="string">"<span class="variable">$cfgfile</span>"</span> 这行代码注释掉</span><br><span class="line">或 把 <span class="variable">$RM</span> <span class="string">"<span class="variable">$cfgfile</span>"</span> 这行删除掉</span><br><span class="line">或 写成 <span class="variable">$RM</span> -f <span class="string">"<span class="variable">$cfgfile</span>"</span></span><br><span class="line">重新再运行 ./configure 就可以了</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make -j 4</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h3 id="安装-apr-util"><a href="#安装-apr-util" class="headerlink" title="安装 apr-util"></a>安装 apr-util</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># 解压并进入解压目录</span></span><br><span class="line">cd /data/tools/</span><br><span class="line">tar -zxvf apr-util<span class="number">-1.6</span><span class="number">.1</span>.tar.gz</span><br><span class="line">cd apr-util<span class="number">-1.6</span><span class="number">.1</span>/</span><br><span class="line"><span class="meta"># 配置，安装在 /data/ 目录下</span></span><br><span class="line">./configure \</span><br><span class="line">--prefix=/data/apr-util \</span><br><span class="line">--with-apr=/data/apr \</span><br><span class="line">--with-apr-iconv=/data/apr-iconv/bin/apriconv</span><br><span class="line"></span><br><span class="line"><span class="meta"># 编译安装</span></span><br><span class="line"><span class="built_in">make</span> -j <span class="number">4</span></span><br><span class="line"><span class="meta"># 报错信息</span></span><br><span class="line">xml/apr_xml.c:<span class="number">35</span>:<span class="number">19</span>: fatal <span class="built_in">error</span>: expat.h: No such file <span class="keyword">or</span> directory</span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> &lt;expat.h&gt;</span></span><br><span class="line">                   ^</span><br><span class="line">compilation terminated.</span><br><span class="line"><span class="built_in">make</span>[<span class="number">1</span>]: *** [xml/apr_xml.lo] <span class="built_in">Error</span> <span class="number">1</span></span><br><span class="line"><span class="built_in">make</span>[<span class="number">1</span>]: Leaving directory `/data/tools/apr-util<span class="number">-1.6</span><span class="number">.1</span>'</span><br><span class="line"><span class="built_in">make</span>: *** [all-recursive] <span class="built_in">Error</span> <span class="number">1</span></span><br><span class="line"><span class="meta"># 解决办法</span></span><br><span class="line"><span class="meta"># 缺少 expat 开发库，安装 expat 库</span></span><br><span class="line">yum install -y expat-devel</span><br><span class="line"></span><br><span class="line"><span class="meta"># 重新执行</span></span><br><span class="line"><span class="built_in">make</span> -j <span class="number">4</span></span><br><span class="line"><span class="built_in">make</span> install</span><br></pre></td></tr></table></figure><h3 id="安装-apr-iconv"><a href="#安装-apr-iconv" class="headerlink" title="安装 apr-iconv"></a>安装 apr-iconv</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 解压并进入解压目录</span></span><br><span class="line"><span class="keyword">cd</span> <span class="string">/data/tools/</span></span><br><span class="line">tar -zxvf apr-iconv-1.2.2.tar.gz</span><br><span class="line"><span class="keyword">cd</span> apr-iconv-1.2.2/</span><br><span class="line"><span class="comment"># 配置，安装在 /data/ 目录下</span></span><br><span class="line"><span class="string">./configure</span> \</span><br><span class="line"><span class="params">--prefix=/data/apr-iconv</span> \</span><br><span class="line"><span class="params">--with-apr=/data/apr</span></span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make -j 4</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><h3 id="配置-Tomcat-使用-apr-库"><a href="#配置-Tomcat-使用-apr-库" class="headerlink" title="配置 Tomcat 使用 apr 库"></a>配置 Tomcat 使用 apr 库</h3><blockquote><p>什么是 tomcat-native ？<br>tomcat-native 库为 Tomcat 提供了本地实现<br>tomcat-native 依赖于三个组件：APR，OPENSSL，JDK</p></blockquote><blockquote><p>大致就是通过 tomcat-native 库，使 tomcat 运行时通过 APR 更多的调用本地 API，达到提升性能的目的。<br>由于依赖关系，安装时，先安装 APR，openssl，然后再安装 tomcat-native，最后配置 tomcat 启动时依赖的库路径。</p></blockquote><h3 id="有-两-种方式配置-Tomcat-使用-apr-库"><a href="#有-两-种方式配置-Tomcat-使用-apr-库" class="headerlink" title="有 两 种方式配置 Tomcat 使用 apr 库"></a>有 两 种方式配置 Tomcat 使用 apr 库</h3><blockquote><p>方式一：配置环境变量<br>在 Linux 系统中，只要 <code>$LD_LIBRARY_PATH</code> 变量值所在路径包含 Tomcat 本地库<br>默认就使用 <code>org.apache.coyote.http11.Http11AprProtocol</code></p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=/data/apr/lib</span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><blockquote><p>方式二：将 apr 库路径参数添加到系统变量中（推荐）<br>编辑 <code>$CATALINA_HOME/bin/setenv.sh</code> 文件（如果文件不存在，新建文件）</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">export</span> <span class="attribute">CATALINA_OPTS</span>=<span class="string">"<span class="variable">$CATALINA_OPTS</span> -Djava.library.path=/data/apr/lib"</span></span><br></pre></td></tr></table></figure><blockquote><p>修改 <code>$TOMCAT_HOME/conf/server.xml</code></p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Connector port=<span class="string">"8000"</span> protocol=<span class="string">"org.apache.coyote.http11.Http11NioProtocol"</span></span><br><span class="line">            connectionTimeout=<span class="string">"20000"</span></span><br><span class="line">            redirectPort=<span class="string">"8443"</span></span><br><span class="line">protocal 修改为 org<span class="selector-class">.apache</span><span class="selector-class">.coyote</span><span class="selector-class">.http11</span><span class="selector-class">.Http11AprProtocol</span>，重启 tomcat</span><br></pre></td></tr></table></figure><h3 id="配置安装-Tomcat-native"><a href="#配置安装-Tomcat-native" class="headerlink" title="配置安装 Tomcat native"></a>配置安装 Tomcat native</h3><blockquote><p>具体的安装步骤其实在 tomcat 自带的 tomcat-native.tar.gz 文件中就有</p></blockquote><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入 Tomcat bin 目录</span></span><br><span class="line">cd /data/app/tomcat/bin/</span><br><span class="line"><span class="comment"># 解压 tomcat-native.tar.gz 后进入解压目录</span></span><br><span class="line">tar -zxvf tomcat-native.tar.gz</span><br><span class="line"><span class="comment"># cd tomcat-native-1.2.8-src/native/  # Tomcat7</span></span><br><span class="line">cd tomcat-native-<span class="number">1.1</span>.<span class="number">33</span>-src/jni/native/</span><br><span class="line"><span class="comment"># 配置 指定 JDK 的目录并加入 SSL</span></span><br><span class="line">./configure \</span><br><span class="line">--prefix=<span class="regexp">/data/apr</span> \</span><br><span class="line">--<span class="keyword">with</span>-apr=<span class="regexp">/data/apr</span><span class="regexp">/bin/apr</span>-<span class="number">1</span>-config \</span><br><span class="line">--<span class="keyword">with</span>-java-home=<span class="regexp">/data/jdk</span>1.<span class="number">8.0_172</span> \</span><br><span class="line">--<span class="keyword">with</span>-ssl=yes</span><br><span class="line"><span class="comment"># 编译安装</span></span><br><span class="line">make -j <span class="number">4</span></span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line"><span class="symbol">warning:</span> remember to run <span class="string">'libtool --finish /usr/local/apr/lib'</span></span><br><span class="line">libtool --finish /data/apr/<span class="class"><span class="keyword">lib</span></span></span><br><span class="line">-<span class="symbol">bash:</span> <span class="symbol">libtool:</span> command not found</span><br><span class="line">yum -y install libtool libtool-devel</span><br><span class="line">libtool --finish /data/apr/<span class="class"><span class="keyword">lib</span></span></span><br></pre></td></tr></table></figure><h3 id="设置-Tomcat-Native-环境变量"><a href="#设置-Tomcat-Native-环境变量" class="headerlink" title="设置 Tomcat Native 环境变量"></a>设置 Tomcat Native 环境变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑 profile</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment"># 在文件中加入如下配置</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">LD_LIBRARY_PATH</span>=/data/apr/lib</span><br><span class="line"><span class="comment"># 退出编辑后保存设置</span></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><blockquote><p>启动 Tomcat，若在控制台或日志出现如下示例信息<br>则表示 APR 配置成功</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">INFO</span>: <span class="selector-tag">Loaded</span> <span class="selector-tag">APR</span> <span class="selector-tag">based</span> <span class="selector-tag">Apache</span> <span class="selector-tag">Tomcat</span> <span class="selector-tag">Native</span> <span class="selector-tag">library</span> 1<span class="selector-class">.1</span><span class="selector-class">.33</span>.</span><br></pre></td></tr></table></figure><blockquote><p>检查是否安装成功<br>如果看到下面的启动日志，表示成功</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Sep</span> 17, 2017 1<span class="selector-pseudo">:59</span><span class="selector-pseudo">:19</span> <span class="selector-tag">PM</span> <span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.coyote</span><span class="selector-class">.AbstractProtocol</span> <span class="selector-tag">start</span></span><br><span class="line"><span class="selector-tag">INFO</span>: <span class="selector-tag">Starting</span> <span class="selector-tag">ProtocolHandler</span> <span class="selector-attr">["http-apr-8080"]</span></span><br><span class="line"><span class="selector-tag">Sep</span> 17, 2017 1<span class="selector-pseudo">:59</span><span class="selector-pseudo">:19</span> <span class="selector-tag">PM</span> <span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.coyote</span><span class="selector-class">.AbstractProtocol</span> <span class="selector-tag">start</span></span><br><span class="line"><span class="selector-tag">INFO</span>: <span class="selector-tag">Starting</span> <span class="selector-tag">ProtocolHandler</span> <span class="selector-attr">["ajp-apr-8009"]</span></span><br><span class="line"><span class="selector-tag">Sep</span> 17, 2017 1<span class="selector-pseudo">:59</span><span class="selector-pseudo">:19</span> <span class="selector-tag">PM</span> <span class="selector-tag">org</span><span class="selector-class">.apache</span><span class="selector-class">.catalina</span><span class="selector-class">.startup</span><span class="selector-class">.Catalina</span> <span class="selector-tag">start</span></span><br><span class="line"><span class="selector-tag">INFO</span>: <span class="selector-tag">Server</span> <span class="selector-tag">startup</span> <span class="selector-tag">in</span> 31002 <span class="selector-tag">ms</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;Tomcat-APR-安装&quot;&gt;&lt;a href=&quot;#Tomcat-APR-安装&quot; class=&quot;headerlink&quot; title=&quot;Tomcat APR 安装&quot;&gt;&lt;/a&gt;Tomcat APR 安装&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;Tomcat 的 APR(Apache portable Run-time libraries)&lt;br&gt;是 Apache HTTP 服务的支持库，提供了一组映射到下层操作系统的 API&lt;br&gt;是用来改善 Tomcat 对静态文件的处理性能，同时如果使用了 HTTPS 方式传输的话，也可以提升 SSL 的处理性能。&lt;br&gt;默认情况下，Tomcat 是用 BIO 的方式来实现网络通信的，性能非常低。&lt;br&gt;而 APR 使用 JNI 的方式来读取文件以及进行网络传输，从操作系统级别来解决异步的 I/O 问题，大幅度的提高性能。&lt;br&gt;如果操作系统不支持某个特定的功能，APR 将提供一个模拟的实现&lt;br&gt;这样程序员使用 APR 编写真正可在不同平台上移植的程序&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Tomcat笔记" scheme="http://www.gmlyo.com/categories/Tomcat%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Tomcat APR 安装" scheme="http://www.gmlyo.com/tags/Tomcat-APR-%E5%AE%89%E8%A3%85/"/>
    
  </entry>
  
  <entry>
    <title>不通过inventory文件，指定host运行Ansible</title>
    <link href="http://www.gmlyo.com//blog/2018/06/05/%E4%B8%8D%E9%80%9A%E8%BF%87inventory%E6%96%87%E4%BB%B6%EF%BC%8C%E6%8C%87%E5%AE%9Ahost%E8%BF%90%E8%A1%8CAnsible/"/>
    <id>http://www.gmlyo.com//blog/2018/06/05/不通过inventory文件，指定host运行Ansible/</id>
    <published>2018-06-04T17:51:34.000Z</published>
    <updated>2018-06-06T03:24:58.355Z</updated>
    
    <content type="html"><![CDATA[<h3 id="如何不通过-inventory-文件，直接指定-host-运行-Ansible？"><a href="#如何不通过-inventory-文件，直接指定-host-运行-Ansible？" class="headerlink" title="如何不通过 inventory 文件，直接指定 host 运行 Ansible？"></a>如何不通过 inventory 文件，直接指定 host 运行 Ansible？</h3><blockquote><p>使用过 ansible 的都知道，不管是运行 Ad-Hoc 还是 playbook，都需要指定一个 inventory 文件，或者使用默认的 inventory 文件。但是现在有一个主机，它尚未在 inventory 文件中配置，那么我们该如何用 ansible 对其进行操作呢？</p></blockquote><a id="more"></a><blockquote><p>一般我们执行都是这样的</p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ansible 192.168.35.215 -m ping</span><br><span class="line">192.168.35.215 | SUCCESS =&gt; &#123;</span><br><span class="line">    <span class="string">"changed"</span>: <span class="literal">false</span>, </span><br><span class="line">    <span class="string">"ping"</span>: <span class="string">"pong"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>这时需要在 inventory 文件 <code>/etc/ansible/hosts</code> 中配置 192.168.35.215 信息</p></blockquote><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[NgxProxy]</span></span><br><span class="line">192<span class="selector-class">.168</span><span class="selector-class">.35</span><span class="selector-class">.215</span></span><br></pre></td></tr></table></figure><blockquote><p>如果没有在 inventory 文件中配置该主机信息，又想用 ansible 对其进行操作<br>就需要用到逗号 <code>,</code> 字符，使用方法如下</p></blockquote><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Host <span class="keyword">and</span> IP address</span><br><span class="line">ansible <span class="keyword">all</span> -i example.com,</span><br><span class="line">ansible <span class="keyword">all</span> -i <span class="number">93.184</span>.<span class="number">216.119</span>,</span><br><span class="line"></span><br><span class="line"># Requires <span class="symbol">'hosts</span>: <span class="keyword">all</span>' <span class="keyword">in</span> your playbook</span><br><span class="line">ansible-playbook -i example.com, playbook.yml</span><br></pre></td></tr></table></figure><blockquote><p>需要注意的是，需要指定范围为 <code>all</code></p></blockquote><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ansible all -i 192.168.35.215, -m ping</span><br><span class="line">192.168.35.215 | SUCCESS =&gt; &#123;</span><br><span class="line">    <span class="string">"changed"</span>: <span class="literal">false</span>, </span><br><span class="line">    <span class="string">"ping"</span>: <span class="string">"pong"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;如何不通过-inventory-文件，直接指定-host-运行-Ansible？&quot;&gt;&lt;a href=&quot;#如何不通过-inventory-文件，直接指定-host-运行-Ansible？&quot; class=&quot;headerlink&quot; title=&quot;如何不通过 inventory 文件，直接指定 host 运行 Ansible？&quot;&gt;&lt;/a&gt;如何不通过 inventory 文件，直接指定 host 运行 Ansible？&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;使用过 ansible 的都知道，不管是运行 Ad-Hoc 还是 playbook，都需要指定一个 inventory 文件，或者使用默认的 inventory 文件。但是现在有一个主机，它尚未在 inventory 文件中配置，那么我们该如何用 ansible 对其进行操作呢？&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="Ansible笔记" scheme="http://www.gmlyo.com/categories/Ansible%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="如何不通过 inventory 文件，直接指定 host 运行 Ansible？" scheme="http://www.gmlyo.com/tags/%E5%A6%82%E4%BD%95%E4%B8%8D%E9%80%9A%E8%BF%87-inventory-%E6%96%87%E4%BB%B6%EF%BC%8C%E7%9B%B4%E6%8E%A5%E6%8C%87%E5%AE%9A-host-%E8%BF%90%E8%A1%8C-Ansible%EF%BC%9F/"/>
    
  </entry>
  
  <entry>
    <title>Next给博客生成一个站点地图</title>
    <link href="http://www.gmlyo.com//blog/2018/06/04/Next%E7%BB%99%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E7%AB%99%E7%82%B9%E5%9C%B0%E5%9B%BE/"/>
    <id>http://www.gmlyo.com//blog/2018/06/04/Next给博客生成一个站点地图/</id>
    <published>2018-06-04T15:34:51.000Z</published>
    <updated>2018-06-06T03:28:00.094Z</updated>
    
    <content type="html"><![CDATA[<h3 id="给博客生成一个站点地图"><a href="#给博客生成一个站点地图" class="headerlink" title="给博客生成一个站点地图"></a>给博客生成一个站点地图</h3><a id="more"></a><h3 id="安装-hexo-generator-seo-friendly-sitemap"><a href="#安装-hexo-generator-seo-friendly-sitemap" class="headerlink" title="安装 hexo-generator-seo-friendly-sitemap"></a>安装 hexo-generator-seo-friendly-sitemap</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-seo-friendly-sitemap <span class="comment">--save</span></span><br></pre></td></tr></table></figure><h3 id="在站点配置文件-config-yml-中添加"><a href="#在站点配置文件-config-yml-中添加" class="headerlink" title="在站点配置文件 _config.yml 中添加"></a>在<code>站点配置</code>文件 _config.yml 中添加</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">sitemap:</span></span><br><span class="line"><span class="symbol">    path:</span> sitemap.xml</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;给博客生成一个站点地图&quot;&gt;&lt;a href=&quot;#给博客生成一个站点地图&quot; class=&quot;headerlink&quot; title=&quot;给博客生成一个站点地图&quot;&gt;&lt;/a&gt;给博客生成一个站点地图&lt;/h3&gt;
    
    </summary>
    
      <category term="Next笔记" scheme="http://www.gmlyo.com/categories/Next%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Next给博客生成一个站点地图" scheme="http://www.gmlyo.com/tags/Next%E7%BB%99%E5%8D%9A%E5%AE%A2%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E7%AB%99%E7%82%B9%E5%9C%B0%E5%9B%BE/"/>
    
  </entry>
  
</feed>
